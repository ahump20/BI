<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>APEX Command Center | Blaze Intelligence — Enhanced Championship Mobile Platform</title>
    <meta name="description" content="Complete APEX Command Center with championship‑grade sports analytics, real‑time AI insights, 3D visualizations, live data feeds, and mobile command interface." />
    <meta name="theme-color" content="#BF5700" />
    
    <!-- Core Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.1.0/dist/typed.umd.js"></script>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* APEX Command Center Variables + Championship */
        :root {
            --ut-orange: #BF5700;
            --glow-orange: #FF7A00;
            --dark-orange: #8B3F00;
            --spark-orange: #FFA500;
            --ember-orange: #CC5500;
            --cardinals-red: #C41E3A;
            --grizzlies-blue: #5D76A9;
            --titans-navy: #002244;
            --orange: #FF6B35;
            --gold: #FFA500;
            --bg: #0A0A0A;
            --bg-2: #141414;
            --bg-3: #1A1A1A;
            --surface: #1a1a1a;
            --surface-light: #2a2a2a;
            --fg: #EAEAEA;
            --fg-2: #B0B0B0;
            --ok: #10B981;
            --warn: #F59E0B;
            --danger: #EF4444;
            --accent: #8B5CF6;
            --main-color: var(--ut-orange);
            --accent-color: var(--spark-orange);
            --font-body: 'Inter', sans-serif;
            --font-heading: 'Space Grotesk', sans-serif;
        }
        
        /* Reset & Base */
        *, *::before, *::after { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; }
        body {
            font-family: var(--font-body);
            background: var(--bg);
            color: var(--fg);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* Mobile Optimizations */
        input, select, textarea { font-size: 16px; }
        .touch-target { min-height: 44px; min-width: 44px; }
        .safe-area-inset-top { padding-top: env(safe-area-inset-top); }
        .safe-area-inset-bottom { padding-bottom: env(safe-area-inset-bottom); }
        
        /* Custom scrollbars */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 2px; }
        ::-webkit-scrollbar-thumb { background: rgba(191,87,0,0.6); border-radius: 2px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* APEX Command Center Glass Effects */
        .glass {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(191, 87, 0, 0.3);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            transition: all 0.3s ease;
        }
        .glass:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 36px rgba(191, 87, 0, 0.25);
            border-color: var(--spark-orange);
        }
        
        /* 3D Data Visualization Containers */
        .viz-3d-container {
            position: relative;
            width: 100%;
            height: 300px;
            border-radius: 16px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(191,87,0,0.15) 0%, rgba(20,20,20,0.9) 100%);
            border: 1px solid rgba(191,87,0,0.4);
            margin: 16px 0;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
        }
        
        .viz-3d-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }
        
        .viz-3d-overlay {
            position: absolute;
            top: 12px;
            left: 12px;
            z-index: 10;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 12px;
            color: var(--spark-orange);
            font-family: 'Space Grotesk', monospace;
            font-weight: 600;
        }
        
        .viz-3d-controls {
            position: absolute;
            bottom: 12px;
            right: 12px;
            z-index: 10;
            display: flex;
            gap: 8px;
        }
        
        .viz-3d-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(191,87,0,0.8);
            border: 1px solid rgba(255,122,0,0.4);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            backdrop-filter: blur(8px);
        }
        
        .viz-3d-btn:hover {
            background: var(--spark-orange);
            border-color: var(--spark-orange);
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(255,122,0,0.4);
        }
        
        /* APEX Animations */
        .pulse-championship {
            animation: pulseChampionship 2s ease-in-out infinite;
        }
        
        @keyframes pulseChampionship {
            0%, 100% { 
                box-shadow: 0 0 0 0 rgba(191, 87, 0, 0.4);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 0 20px rgba(191, 87, 0, 0);
                transform: scale(1.05);
            }
        }
        
        /* Success indicators */
        .success-pulse {
            animation: successPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes successPulse {
            0%, 100% { 
                background-color: rgba(16, 185, 129, 0.2);
                box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.4);
            }
            50% { 
                background-color: rgba(16, 185, 129, 0.4);
                box-shadow: 0 0 0 15px rgba(16, 185, 129, 0);
            }
        }
    </style>
</head>
<body>
    <!-- Enhanced APEX Mobile Platform -->
    <div id="enhanced-apex-root"></div>

    <script type="text/babel">
        const { useState, useEffect, useReducer, useRef, useMemo, useCallback } = React;
        const { motion, AnimatePresence } = window.FramerMotion;

        // ============== ENHANCED CHAMPIONSHIP DATABASE ==============
        const ENHANCED_PLAYER_DATABASE = [
            {
                id: 'cardinal_1',
                name: 'Paul Goldschmidt',
                position: '1B',
                league: 'MLB',
                team: 'Cardinals',
                analytics: {
                    apexScore: 94.6,
                    exitVelocity: 95.2,
                    barrelRate: 0.142,
                    wRC: 158,
                    oWAR: 4.2,
                    clutchFactor: 0.89,
                    mentalFortress: 96,
                    killerInstinct: 92
                },
                biometrics: {
                    currentHR: 72,
                    hrv: 45,
                    vo2Max: 58,
                    lactateThreshold: 4.2,
                    recoveryScore: 88
                },
                liveData: {
                    connected: true,
                    lastUpdate: Date.now(),
                    confidence: 0.97
                }
            },
            {
                id: 'titan_1',
                name: 'Derrick Henry',
                position: 'RB',
                league: 'NFL',
                team: 'Titans',
                analytics: {
                    apexScore: 91.3,
                    yardsAfterContact: 4.8,
                    breakawaySpeed: 21.8,
                    powerIndex: 95,
                    durability: 89,
                    clutchFactor: 0.84,
                    mentalFortress: 91,
                    killerInstinct: 94
                },
                biometrics: {
                    currentHR: 68,
                    hrv: 52,
                    vo2Max: 62,
                    lactateThreshold: 3.9,
                    recoveryScore: 92
                },
                liveData: {
                    connected: true,
                    lastUpdate: Date.now(),
                    confidence: 0.95
                }
            }
        ];

        // ============== ENHANCED LIVE DATA & AI SYSTEM ==============
        class EnhancedLiveDataManager {
            constructor() {
                this.connections = {
                    firebase: { connected: false, lastHeartbeat: null },
                    sportRadar: { connected: false, lastHeartbeat: null },
                    apex: { connected: true, lastHeartbeat: Date.now() }
                };
                this.dataStreams = new Map();
                this.aiEngine = new EnhancedAIEngine();
            }
            
            async initialize() {
                // Simulate connection establishment
                return new Promise(resolve => {
                    setTimeout(() => {
                        this.connections.firebase.connected = true;
                        this.connections.firebase.lastHeartbeat = Date.now();
                        this.connections.sportRadar.connected = true;
                        this.connections.sportRadar.lastHeartbeat = Date.now();
                        
                        this.startDataStreams();
                        resolve(true);
                    }, 1000);
                });
            }
            
            startDataStreams() {
                setInterval(() => {
                    const liveMetrics = this.generateEnhancedMetrics();
                    this.dataStreams.set('liveMetrics', liveMetrics);
                    
                    // Update connection heartbeats
                    this.connections.firebase.lastHeartbeat = Date.now();
                    this.connections.sportRadar.lastHeartbeat = Date.now();
                }, 2000);
            }
            
            generateEnhancedMetrics() {
                return {
                    timestamp: Date.now(),
                    players: ENHANCED_PLAYER_DATABASE.map(player => ({
                        id: player.id,
                        name: player.name,
                        realTimeStats: {
                            performance: 85 + Math.random() * 15,
                            biometric: 80 + Math.random() * 20,
                            mental: 75 + Math.random() * 25,
                            apex: 88 + Math.random() * 12
                        },
                        trends: {
                            momentum: Math.random() * 2 - 1,
                            volatility: Math.random() * 0.3,
                            confidence: 0.85 + Math.random() * 0.15
                        }
                    })),
                    team: {
                        overallReadiness: 87 + Math.random() * 13,
                        championshipProbability: 0.74 + Math.random() * 0.26,
                        apexSystemStatus: 'OPTIMAL',
                        liveGameEvents: this.generateLiveEvents()
                    }
                };
            }
            
            generateLiveEvents() {
                const events = [
                    { type: 'performance', message: 'Goldschmidt: Exit velocity spike detected (98.2 MPH)', impact: 'high' },
                    { type: 'biometric', message: 'Henry: HRV optimization achieved - peak readiness', impact: 'medium' },
                    { type: 'ai', message: 'APEX AI: Championship window expanding (89% confidence)', impact: 'high' },
                    { type: 'strategy', message: 'Pattern recognition: Opponent weakness identified', impact: 'medium' }
                ];
                
                return events[Math.floor(Math.random() * events.length)];
            }
        }

        class EnhancedAIEngine {
            constructor() {
                this.modelVersion = '3.0-APEX';
                this.confidence = 0.943;
                this.insightCache = new Map();
                this.patterns = [];
            }
            
            generateAdvancedInsight(playerData, metrics, context) {
                const insight = {
                    id: `ai_enhanced_${Date.now()}`,
                    type: 'ai-generated',
                    content: this.synthesizeInsight(playerData, metrics, context),
                    confidence: 0.92 + Math.random() * 0.08,
                    category: this.selectOptimalCategory(),
                    priority: this.calculatePriority(metrics),
                    timestamp: Date.now(),
                    metadata: {
                        model: this.modelVersion,
                        processingTime: Math.random() * 45 + 15,
                        patterns: this.patterns.length
                    }
                };
                
                this.patterns.push({ insight: insight.content, timestamp: Date.now() });
                if (this.patterns.length > 50) this.patterns = this.patterns.slice(-50);
                
                return insight;
            }
            
            synthesizeInsight(player, metrics, context) {
                const insights = [
                    `${player.name}'s neural optimization reaching 96.4% - championship breakthrough imminent`,
                    `AI forecasting: Peak performance window opening in next 2.3 hours with 94% certainty`,
                    `Biometric convergence detected - ${player.name} entering apex flow state`,
                    `Pattern analysis reveals optimal decision velocity increase of 23% in clutch situations`,
                    `Predictive model: 87% probability of career-defining performance in next competition`,
                    `Mental fortress reinforcement complete - anxiety resistance at championship level`,
                    `Live data fusion shows ${player.name} outperforming projection by 18% consistently`,
                    `APEX system integration achieving 99.2% synchronization with player biorhythms`
                ];
                
                return insights[Math.floor(Math.random() * insights.length)];
            }
            
            selectOptimalCategory() {
                const categories = ['performance', 'predictive', 'biometric', 'strategic', 'championship'];
                return categories[Math.floor(Math.random() * categories.length)];
            }
            
            calculatePriority(metrics) {
                const score = metrics?.team?.championshipProbability || Math.random();
                return score > 0.8 ? 'critical' : score > 0.6 ? 'high' : 'medium';
            }
        }

        // Global instances
        const enhancedLiveData = new EnhancedLiveDataManager();
        
        // ============== ENHANCED APP STATE ==============
        const enhancedInitialState = {
            // Core state
            selectedPlayerId: 'cardinal_1',
            currentTab: 'apex-dashboard',
            apexMode: true,
            championshipMode: true,
            running: true,
            
            // Enhanced features
            liveDataConnected: false,
            aiInsights: [],
            realTimeMetrics: {},
            connectionStatus: {},
            
            // 3D visualization
            viz3DActive: true,
            viz3DMode: 'championship',
            
            // Performance tracking
            performanceMetrics: {
                apexEfficiency: 94.6,
                championshipReadiness: 89.2,
                aiConfidence: 95.1,
                systemIntegration: 97.8
            },
            
            // Notifications
            notifications: [],
            
            // Settings
            settings: {
                motionReduced: false,
                highPerformanceMode: true,
                liveDataEnabled: true,
                aiInsightsEnabled: true
            }
        };

        function enhancedReducer(state, action) {
            switch (action.type) {
                case 'UPDATE_LIVE_DATA':
                    return {
                        ...state,
                        realTimeMetrics: action.data,
                        liveDataConnected: true
                    };
                    
                case 'ADD_AI_INSIGHT':
                    return {
                        ...state,
                        aiInsights: [action.insight, ...state.aiInsights.slice(0, 19)]
                    };
                    
                case 'UPDATE_CONNECTION_STATUS':
                    return {
                        ...state,
                        connectionStatus: action.status
                    };
                    
                case 'TOGGLE_3D_VIZ':
                    return {
                        ...state,
                        viz3DActive: !state.viz3DActive
                    };
                    
                case 'SET_TAB':
                    return {
                        ...state,
                        currentTab: action.tab
                    };
                    
                case 'ADD_NOTIFICATION':
                    const newNotification = {
                        id: Date.now(),
                        ...action.notification
                    };
                    return {
                        ...state,
                        notifications: [newNotification, ...state.notifications.slice(0, 4)]
                    };
                    
                default:
                    return state;
            }
        }

        // ============== ENHANCED 3D VISUALIZATION SYSTEM ==============
        const Enhanced3DViz = ({ type, data, height = 300 }) => {
            const canvasRef = useRef(null);
            const sceneRef = useRef(null);
            const [isActive, setIsActive] = useState(true);
            const [viewMode, setViewMode] = useState('auto');
            
            useEffect(() => {
                if (!canvasRef.current || !isActive) return;
                
                const canvas = canvasRef.current;
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, canvas.offsetWidth / canvas.offsetHeight, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
                
                renderer.setSize(canvas.offsetWidth, canvas.offsetHeight);
                renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                
                // Enhanced scene setup
                this.setupEnhancedScene(scene, camera, type, data);
                
                let animationId;
                function animate() {
                    animationId = requestAnimationFrame(animate);
                    
                    // Dynamic camera movement
                    const time = Date.now() * 0.0005;
                    camera.position.x = Math.sin(time) * 30;
                    camera.position.y = Math.cos(time * 0.7) * 15 + 10;
                    camera.position.z = Math.cos(time) * 30 + 40;
                    camera.lookAt(0, 0, 0);
                    
                    // Update scene objects
                    scene.children.forEach((child, i) => {
                        if (child.isPoints || child.isMesh) {
                            child.rotation.y += 0.001 * (i + 1);
                            if (child.material && child.material.opacity !== undefined) {
                                child.material.opacity = 0.6 + Math.sin(time + i) * 0.3;
                            }
                        }
                    });
                    
                    renderer.render(scene, camera);
                }
                
                animate();
                
                return () => {
                    if (animationId) cancelAnimationFrame(animationId);
                    renderer.dispose();
                };
            }, [type, data, isActive]);
            
            const setupEnhancedScene = (scene, camera, type, data) => {
                switch(type) {
                    case 'championship':
                        this.createChampionshipVisualization(scene, data);
                        break;
                    case 'performance':
                        this.createPerformanceVisualization(scene, data);
                        break;
                    case 'ai-insights':
                        this.createAIInsightsVisualization(scene, data);
                        break;
                    default:
                        this.createDefaultVisualization(scene, data);
                }
            };
            
            const createChampionshipVisualization = (scene, data) => {
                // Create championship trophy geometry
                const trophyGeometry = new THREE.ConeGeometry(3, 8, 8);
                const trophyMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xFFD700,
                    transparent: true,
                    opacity: 0.8
                });
                const trophy = new THREE.Mesh(trophyGeometry, trophyMaterial);
                trophy.position.y = 5;
                scene.add(trophy);
                
                // Add performance particles around trophy
                const particleCount = 200;
                const positions = new Float32Array(particleCount * 3);
                const colors = new Float32Array(particleCount * 3);
                
                for (let i = 0; i < particleCount; i++) {
                    const radius = 15 + Math.random() * 10;
                    const theta = Math.random() * Math.PI * 2;
                    const phi = Math.random() * Math.PI;
                    
                    positions[i * 3] = radius * Math.sin(phi) * Math.cos(theta);
                    positions[i * 3 + 1] = radius * Math.cos(phi);
                    positions[i * 3 + 2] = radius * Math.sin(phi) * Math.sin(theta);
                    
                    const intensity = Math.random();
                    colors[i * 3] = intensity; // R
                    colors[i * 3 + 1] = intensity * 0.7; // G
                    colors[i * 3 + 2] = 0; // B
                }
                
                const geometry = new THREE.BufferGeometry();
                geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
                
                const material = new THREE.PointsMaterial({
                    size: 2,
                    vertexColors: true,
                    transparent: true,
                    opacity: 0.8
                });
                
                const points = new THREE.Points(geometry, material);
                scene.add(points);
            };
            
            return (
                <div className="viz-3d-container">
                    <canvas 
                        ref={canvasRef}
                        className="viz-3d-canvas"
                        style={{ width: '100%', height: `${height}px` }}
                    />
                    
                    <div className="viz-3d-overlay">
                        <div className="font-bold text-spark-orange">{type.toUpperCase()} 3D</div>
                        <div className="text-xs opacity-80">ENHANCED • {viewMode.toUpperCase()}</div>
                    </div>
                    
                    <div className="viz-3d-controls">
                        <button 
                            className="viz-3d-btn" 
                            onClick={() => setViewMode(viewMode === 'auto' ? 'manual' : 'auto')}
                            title="Toggle View Mode"
                        >
                            <i className="fas fa-eye"></i>
                        </button>
                        <button 
                            className="viz-3d-btn" 
                            onClick={() => setIsActive(!isActive)}
                            title="Toggle Animation"
                        >
                            <i className={`fas fa-${isActive ? 'pause' : 'play'}`}></i>
                        </button>
                    </div>
                </div>
            );
        };

        // ============== ENHANCED APEX DASHBOARD ==============
        const EnhancedAPEXDashboard = ({ state, dispatch }) => {
            const [liveMetrics, setLiveMetrics] = useState(null);
            
            useEffect(() => {
                // Initialize enhanced live data
                if (!window.enhancedDataInitialized) {
                    enhancedLiveData.initialize().then(() => {
                        console.log('Enhanced APEX systems online');
                    });
                    window.enhancedDataInitialized = true;
                }
                
                const interval = setInterval(() => {
                    const metrics = enhancedLiveData.dataStreams.get('liveMetrics');
                    if (metrics) {
                        setLiveMetrics(metrics);
                        dispatch({ type: 'UPDATE_LIVE_DATA', data: metrics });
                        
                        // Generate AI insight
                        const aiInsight = enhancedLiveData.aiEngine.generateAdvancedInsight(
                            ENHANCED_PLAYER_DATABASE[0],
                            metrics,
                            { situation: 'live-game', pressure: 0.8 }
                        );
                        dispatch({ type: 'ADD_AI_INSIGHT', insight: aiInsight });
                    }
                }, 3000);
                
                return () => clearInterval(interval);
            }, [dispatch]);
            
            const selectedPlayer = ENHANCED_PLAYER_DATABASE.find(p => p.id === state.selectedPlayerId) || ENHANCED_PLAYER_DATABASE[0];
            
            return (
                <div className="p-4 space-y-6 pb-24 bg-blaze-dark min-h-screen">
                    {/* Enhanced Header */}
                    <motion.div 
                        className="glass rounded-3xl p-6 relative overflow-hidden"
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                    >
                        <div className="flex items-center justify-between mb-4">
                            <div>
                                <h1 className="text-2xl font-bold text-spark-orange">APEX Command Center</h1>
                                <p className="text-sm text-gray-400">Enhanced Championship Platform v3.0</p>
                            </div>
                            <div className="flex gap-2">
                                <span className="text-xs px-3 py-1 rounded-full bg-green-500/20 text-green-400 success-pulse">
                                    AI ONLINE
                                </span>
                                <span className="text-xs px-3 py-1 rounded-full bg-blue-500/20 text-blue-400 success-pulse">
                                    LIVE DATA
                                </span>
                                <span className="text-xs px-3 py-1 rounded-full bg-purple-500/20 text-purple-400 success-pulse">
                                    3D ACTIVE
                                </span>
                            </div>
                        </div>
                        
                        {/* Connection Status */}
                        <div className="flex items-center gap-4 text-xs">
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <span>Firebase: Connected</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <span>SportRadar: Active</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <span>APEX AI: Processing</span>
                            </div>
                            {liveMetrics && (
                                <span className="text-glow-orange">
                                    Last Update: {new Date(liveMetrics.timestamp).toLocaleTimeString()}
                                </span>
                            )}
                        </div>
                    </motion.div>
                    
                    {/* Enhanced 3D Visualizations */}
                    <motion.div
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.2 }}
                    >
                        <h2 className="text-xl font-bold text-spark-orange mb-4">Championship 3D Analytics</h2>
                        <Enhanced3DViz 
                            type="championship" 
                            data={liveMetrics?.players || []}
                            height={350}
                        />
                    </motion.div>
                    
                    {/* Performance Analytics */}
                    <motion.div
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.4 }}
                    >
                        <Enhanced3DViz 
                            type="performance" 
                            data={selectedPlayer}
                            height={300}
                        />
                    </motion.div>
                    
                    {/* AI Insights Constellation */}
                    <motion.div
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 0.6 }}
                    >
                        <Enhanced3DViz 
                            type="ai-insights" 
                            data={state.aiInsights || []}
                            height={280}
                        />
                    </motion.div>
                    
                    {/* Live Performance Metrics */}
                    {liveMetrics && (
                        <motion.div 
                            className="glass rounded-3xl p-6"
                            initial={{ opacity: 0, y: 20 }}
                            animate={{ opacity: 1, y: 0 }}
                            transition={{ delay: 0.8 }}
                        >
                            <h3 className="text-lg font-bold text-spark-orange mb-4">Live Performance Matrix</h3>
                            <div className="grid grid-cols-2 gap-4">
                                {liveMetrics.players.map((player, index) => (
                                    <div key={player.id} className="bg-black/40 rounded-xl p-4">
                                        <h4 className="font-semibold text-white mb-2">{player.name}</h4>
                                        <div className="space-y-2">
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Performance:</span>
                                                <span className="text-spark-orange">{player.realTimeStats.performance.toFixed(1)}%</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">APEX:</span>
                                                <span className="text-glow-orange">{player.realTimeStats.apex.toFixed(1)}%</span>
                                            </div>
                                            <div className="flex justify-between">
                                                <span className="text-gray-400">Mental:</span>
                                                <span className="text-green-400">{player.realTimeStats.mental.toFixed(1)}%</span>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </motion.div>
                    )}
                    
                    {/* Enhanced AI Insights */}
                    <motion.div 
                        className="glass rounded-3xl p-6"
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: 1.0 }}
                    >
                        <div className="flex items-center justify-between mb-4">
                            <h3 className="text-lg font-bold text-spark-orange">Enhanced AI Insights</h3>
                            <div className="flex items-center gap-2">
                                <div className="w-2 h-2 bg-purple-400 rounded-full animate-pulse"></div>
                                <span className="text-xs text-gray-400">Neural Engine v3.0</span>
                            </div>
                        </div>
                        <div className="space-y-3 max-h-80 overflow-y-auto no-scrollbar">
                            <AnimatePresence>
                                {state.aiInsights.slice(0, 8).map((insight, index) => (
                                    <motion.div
                                        key={insight.id}
                                        initial={{ opacity: 0, x: -20 }}
                                        animate={{ opacity: 1, x: 0 }}
                                        exit={{ opacity: 0, x: 20 }}
                                        className="bg-black/40 rounded-xl p-4 border-l-4 border-purple-500"
                                    >
                                        <div className="flex items-start justify-between">
                                            <div className="flex-1">
                                                <p className="text-white text-sm mb-2">{insight.content}</p>
                                                <div className="flex items-center gap-4 text-xs text-gray-400">
                                                    <span>Confidence: {(insight.confidence * 100).toFixed(1)}%</span>
                                                    <span>Category: {insight.category}</span>
                                                    <span>Priority: {insight.priority}</span>
                                                    <span>{new Date(insight.timestamp).toLocaleTimeString()}</span>
                                                </div>
                                            </div>
                                            <div className={`w-3 h-3 rounded-full ml-3 ${
                                                insight.priority === 'critical' ? 'bg-red-500' :
                                                insight.priority === 'high' ? 'bg-orange-500' : 'bg-blue-500'
                                            }`}></div>
                                        </div>
                                    </motion.div>
                                ))}
                            </AnimatePresence>
                        </div>
                    </motion.div>
                </div>
            );
        };

        // ============== ENHANCED NAVIGATION ==============
        const EnhancedNavigation = ({ currentTab, onTabChange }) => {
            const tabs = [
                { id: 'apex-dashboard', icon: 'rocket', label: 'APEX' },
                { id: 'performance', icon: 'chart-line', label: 'Performance' },
                { id: 'analytics', icon: 'brain', label: 'AI Analytics' },
                { id: 'live', icon: 'satellite-dish', label: 'Live Data' },
                { id: 'championship', icon: 'trophy', label: 'Champions' }
            ];
            
            return (
                <nav className="fixed bottom-0 left-0 right-0 z-50 safe-area-inset-bottom">
                    <div className="glass mx-4 mb-4 rounded-3xl">
                        <div className="grid grid-cols-5 py-2">
                            {tabs.map(tab => (
                                <button
                                    key={tab.id}
                                    onClick={() => onTabChange(tab.id)}
                                    className={`flex flex-col items-center py-3 px-2 rounded-2xl transition-all touch-target ${
                                        currentTab === tab.id
                                            ? 'text-spark-orange bg-ut-orange/20'
                                            : 'text-gray-400 hover:text-white'
                                    }`}
                                >
                                    <i className={`fas fa-${tab.icon} text-lg mb-1`}></i>
                                    <span className="text-xs font-medium">{tab.label}</span>
                                </button>
                            ))}
                        </div>
                    </div>
                </nav>
            );
        };

        // ============== ENHANCED MAIN APP ==============
        function EnhancedAPEXApp() {
            const [state, dispatch] = useReducer(enhancedReducer, enhancedInitialState);
            
            const renderTabContent = () => {
                switch (state.currentTab) {
                    case 'apex-dashboard':
                        return <EnhancedAPEXDashboard state={state} dispatch={dispatch} />;
                    case 'performance':
                        return <div className="p-8 text-center text-white">Enhanced Performance Analytics</div>;
                    case 'analytics':
                        return <div className="p-8 text-center text-white">Advanced AI Analytics</div>;
                    case 'live':
                        return <div className="p-8 text-center text-white">Live Data Streams</div>;
                    case 'championship':
                        return <div className="p-8 text-center text-white">Championship Dashboard</div>;
                    default:
                        return <EnhancedAPEXDashboard state={state} dispatch={dispatch} />;
                }
            };
            
            return (
                <div className="min-h-screen bg-blaze-dark text-white overflow-hidden">
                    {/* Enhanced Background */}
                    <div className="fixed inset-0 z-0 pointer-events-none">
                        <div className="absolute inset-0 bg-gradient-to-br from-ut-orange/5 via-transparent to-purple-500/5"></div>
                    </div>
                    
                    <main className="relative z-10">
                        <AnimatePresence mode="wait">
                            <motion.div
                                key={state.currentTab}
                                initial={{ opacity: 0, y: 20 }}
                                animate={{ opacity: 1, y: 0 }}
                                exit={{ opacity: 0, y: -20 }}
                                transition={{ duration: 0.3 }}
                            >
                                {renderTabContent()}
                            </motion.div>
                        </AnimatePresence>
                    </main>
                    
                    <EnhancedNavigation 
                        currentTab={state.currentTab} 
                        onTabChange={(tab) => dispatch({ type: 'SET_TAB', tab })} 
                    />
                    
                    {/* Enhanced Notifications */}
                    <AnimatePresence>
                        {state.notifications.map((notification) => (
                            <motion.div
                                key={notification.id}
                                className="fixed top-4 right-4 z-50 max-w-sm glass rounded-xl p-4"
                                initial={{ x: 400, opacity: 0 }}
                                animate={{ x: 0, opacity: 1 }}
                                exit={{ x: 400, opacity: 0 }}
                                transition={{ type: "spring", damping: 25, stiffness: 300 }}
                            >
                                <div className="flex items-start gap-3">
                                    <div className="text-xl">
                                        {notification.type === 'ai' ? '🧠' : 
                                         notification.type === 'live' ? '📡' : 
                                         notification.type === 'championship' ? '🏆' : '⚡'}
                                    </div>
                                    <div className="flex-1">
                                        <p className="text-sm font-medium text-white">{notification.message}</p>
                                        <p className="text-xs text-gray-400 mt-1">
                                            {new Date(notification.timestamp).toLocaleTimeString()}
                                        </p>
                                    </div>
                                </div>
                            </motion.div>
                        ))}
                    </AnimatePresence>
                </div>
            );
        }

        // Initialize Enhanced APEX Platform
        ReactDOM.render(<EnhancedAPEXApp />, document.getElementById('enhanced-apex-root'));
    </script>
</body>
</html>