<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Blaze Intelligence — Championship Mobile Platform</title>
    <meta name="description" content="Championship‑grade sports analytics with real‑time insights, interactive visuals, and responsive dashboards." />
    <meta name="theme-color" content="#0A0A0A" />
    
    <!-- Core Libraries -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/recharts@2.5.0/dist/Recharts.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/framer-motion@10.16.4/dist/framer-motion.js"></script>
    <script src="https://unpkg.com/three@0.155.0/build/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        /* Championship-grade CSS Variables */
        :root {
            --orange: #FF6B35;
            --gold: #FFA500;
            --bg: #0A0A0A;
            --bg-2: #121212;
            --surface: #1a1a1a;
            --surface-light: #2a2a2a;
            --fg: #FFFFFF;
            --fg-2: #B0B0B0;
            --ok: #10B981;
            --warn: #F59E0B;
            --danger: #EF4444;
            --accent: #8B5CF6;
        }
        
        /* Reset & Base */
        *, *::before, *::after { box-sizing: border-box; }
        html, body { height: 100%; margin: 0; }
        body {
            font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--fg);
            line-height: 1.6;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Mobile Optimizations */
        input, select, textarea { font-size: 16px; }
        .touch-target { min-height: 44px; min-width: 44px; }
        .safe-area-inset-top { padding-top: env(safe-area-inset-top); }
        .safe-area-inset-bottom { padding-bottom: env(safe-area-inset-bottom); }
        
        /* Custom scrollbars */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); border-radius: 2px; }
        ::-webkit-scrollbar-thumb { background: rgba(255,107,53,0.6); border-radius: 2px; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Championship Glass Effects */
        .glass {
            background: rgba(18, 18, 18, 0.65);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.35);
            transition: 0.3s;
        }
        .glass:hover {
            transform: translateY(-2px);
            border-color: var(--orange);
            box-shadow: 0 16px 48px rgba(255, 107, 53, 0.25);
        }
        .glass-light {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
        }
        
        /* Gradient Text */
        .gradient-text {
            background: linear-gradient(135deg, var(--orange), var(--gold));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        /* Championship Backgrounds */
        .bg-blaze-primary { background: linear-gradient(135deg, var(--orange) 0%, var(--gold) 100%); }
        .bg-blaze-dark { background: linear-gradient(135deg, var(--bg) 0%, var(--bg-2) 50%, var(--bg) 100%); }
        .bg-hero-glow { 
            background: radial-gradient(ellipse at center, rgba(255, 107, 53, 0.15) 0%, transparent 70%);
        }
        
        /* Championship Animations */
        @keyframes pulse-championship { 
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 107, 53, 0.4);
                transform: scale(1);
            } 
            50% { 
                box-shadow: 0 0 40px rgba(255, 107, 53, 0.8);
                transform: scale(1.02);
            } 
        }
        .pulse-championship { animation: pulse-championship 2s infinite; }
        
        @keyframes slide-up { 
            from { transform: translateY(100%); opacity: 0; } 
            to { transform: translateY(0); opacity: 1; } 
        }
        .slide-up { animation: slide-up 0.4s ease-out; }
        
        @keyframes fade-in { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .fade-in { animation: fade-in 0.6s ease-out; }
        
        @keyframes stream-up { 
            from { transform: translateY(100%); opacity: 0; } 
            to { transform: translateY(-100%); opacity: 1; } 
        }
        .stream-up { animation: stream-up 3s linear infinite; }
        
        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 50;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(16px);
            border-top: 1px solid rgba(255, 107, 53, 0.3);
        }
        
        /* League-Specific Styling */
        .league-mlb { background: linear-gradient(135deg, rgba(220, 38, 38, 0.2), rgba(185, 28, 28, 0.1)); border-color: rgba(220, 38, 38, 0.5); }
        .league-nfl { background: linear-gradient(135deg, rgba(37, 99, 235, 0.2), rgba(29, 78, 216, 0.1)); border-color: rgba(37, 99, 235, 0.5); }
        .league-ncaaf { background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.1)); border-color: rgba(34, 197, 94, 0.5); }
        .league-ncaab { background: linear-gradient(135deg, rgba(168, 85, 247, 0.2), rgba(147, 51, 234, 0.1)); border-color: rgba(168, 85, 247, 0.5); }
        
        /* Status Indicators */
        .status-online { color: var(--ok); }
        .status-warning { color: var(--warn); }
        .status-critical { color: var(--danger); }
        
        /* Loading Spinner */
        .loading-spinner {
            width: 24px;
            height: 24px;
            border: 3px solid rgba(255, 107, 53, 0.3);
            border-top: 3px solid var(--orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Haptic Feedback */
        .haptic:active {
            transform: scale(0.95);
            transition: transform 0.1s ease;
        }
        
        /* Grid Background */
        .grid-bg { 
            background-image:
                linear-gradient(rgba(255,107,53,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(255,107,53,0.03) 1px, transparent 1px);
            background-size: 50px 50px;
        }
        
        /* Championship Enigma Gauge */
        .enigma-gauge {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto;
        }
        
        /* Responsive Typography */
        @media (max-width: 375px) {
            .text-responsive-lg { font-size: 1.5rem; }
            .text-responsive-xl { font-size: 1.75rem; }
        }
        @media (min-width: 376px) {
            .text-responsive-lg { font-size: 1.75rem; }
            .text-responsive-xl { font-size: 2rem; }
        }
        
        /* Tag Component */
        .tag {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 9999px;
            font-size: 10px;
            font-weight: 500;
            background: linear-gradient(to right, var(--orange), var(--gold));
            color: white;
        }
        
        /* Championship Header */
        .championship-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            height: 72px;
            background: rgba(10, 10, 10, 0.92);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 107, 53, 0.12);
            display: flex;
            align-items: center;
        }
        
        /* System Health Indicator */
        .health-indicator {
            font-size: 0.8rem;
            padding: 0.5rem 1rem;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border: 1px solid rgba(255, 107, 53, 0.2);
        }
        .health-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--ok);
            animation: pulse 2s infinite;
        }
        
        /* Motion Reduction Support */
        @media (prefers-reduced-motion: reduce) {
            .glass:hover { transform: none; }
            .pulse-championship, .stream-up, .health-dot { animation: none; }
        }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useReducer, useRef, useMemo, useCallback } = React;
const { motion, AnimatePresence } = Motion;
const { LineChart, Line, BarChart, Bar, RadarChart, Radar, PolarGrid, PolarAngleAxis, PolarRadiusAxis, 
        CartesianGrid, XAxis, YAxis, Tooltip, ResponsiveContainer, AreaChart, Area, PieChart, Pie, Cell } = Recharts;

/** ========================================================================
 * BLAZE INTELLIGENCE - CHAMPIONSHIP MOBILE PLATFORM
 * 
 * The ultimate unified platform integrating:
 * - Championship Home features with Three.js background
 * - Real-time pattern recognition streaming
 * - Complete player database and scouting system
 * - MCP tools integration and subdomain connectors
 * - Live analytics dashboard with biometric simulation
 * - Mobile-first design with championship-grade UX
 * ======================================================================== */

// ============== CORE CONFIGURATION ==============

const LEAGUES = {
    MLB: { name: 'MLB', sport: 'baseball', icon: '⚾', color: 'red', cssClass: 'league-mlb' },
    NFL: { name: 'NFL', sport: 'football', icon: '🏈', color: 'blue', cssClass: 'league-nfl' },
    NCAAF: { name: 'NCAA Football', sport: 'football', icon: '🏈', color: 'green', cssClass: 'league-ncaaf' },
    NCAAB: { name: 'NCAA Baseball', sport: 'baseball', icon: '⚾', color: 'purple', cssClass: 'league-ncaab' }
};

const CHAMPIONSHIP_MATRIX = {
    cardinals: { readiness: 97, momentum: 93, projection: "World Series" },
    titans: { readiness: 89, momentum: 87, projection: "Playoff Push" },
    longhorns: { readiness: 94, momentum: 95, projection: "Championship" },
    grizzlies: { readiness: 91, momentum: 88, projection: "Grit & Grind" }
};

const PLATFORM_METRICS = [
    { label: "Data Points", value: "12.7M+", unit: "Analyzed", trend: 12.3 },
    { label: "Model Accuracy", value: "95.8%", unit: "Precision", trend: 2.1 },
    { label: "Response Time", value: "72ms", unit: "Average", trend: -8.7 },
    { label: "System Uptime", value: "99.97%", unit: "Availability", trend: 0.1 }
];

// Enhanced player database with championship analytics
const PLAYER_DATABASE = [
    {
        id: 'mlb-stl-001',
        name: 'Paul Goldschmidt',
        league: 'MLB',
        team: 'St. Louis Cardinals',
        position: '1B',
        age: 37,
        physical: { height: "6'3\"", weight: '220 lbs' },
        stats: { batting: { AVG: 0.275, HR: 28, RBI: 88, OPS: 0.850 } },
        analytics: {
            scoutingGrades: { hit: 60, power: 60, run: 45, field: 55, arm: 50, overall: 60 },
            statcast: { exitVelo_avg: 91.2, exitVelo_max: 112.5, launchAngle_avg: 13.0, barrelRate: 12.4 },
            clutchScore: 86.3,
            championshipFactors: {
                clutchGene: 88,
                killerInstinct: 92,
                flowState: 85,
                mentalFortress: 90,
                winnerDNA: 94
            },
            trend: 'stable',
            injuryStatus: 'healthy',
            lastUpdated: '2025-03-10'
        },
        notes: 'Veteran anchor with championship experience and professional ABs.'
    },
    {
        id: 'mlb-stl-002',
        name: 'Nolan Arenado',
        league: 'MLB',
        team: 'St. Louis Cardinals',
        position: '3B',
        age: 34,
        physical: { height: "6'2\"", weight: '215 lbs' },
        stats: { batting: { AVG: 0.283, HR: 31, RBI: 103, OPS: 0.872 } },
        analytics: {
            scoutingGrades: { hit: 55, power: 60, run: 40, field: 70, arm: 70, overall: 65 },
            statcast: { exitVelo_avg: 90.0, exitVelo_max: 111.0, launchAngle_avg: 17.5, barrelRate: 9.7 },
            clutchScore: 90.2,
            championshipFactors: {
                clutchGene: 95,
                killerInstinct: 89,
                flowState: 88,
                mentalFortress: 93,
                winnerDNA: 91
            },
            trend: 'up',
            injuryStatus: 'healthy',
            lastUpdated: '2025-03-10'
        },
        notes: 'Platinum glove defender with championship pedigree and clutch DNA.'
    },
    {
        id: 'nfl-ten-001',
        name: 'Will Levis',
        league: 'NFL',
        team: 'Tennessee Titans',
        position: 'QB',
        age: 25,
        physical: { height: "6'4\"", weight: '229 lbs' },
        stats: { passing: { completions: 285, attempts: 448, yards: 3650, TDs: 24, INT: 11 } },
        analytics: {
            combine: { fortyDash: 4.72, vertical: 34, broadJump: 124 },
            advancedMetrics: { cleanPocketCompPct: 69.8, underPressureCompPct: 41.2 },
            scoutingGrades: { arm: 65, processing: 50, accuracy: 55, mobility: 55, toughness: 65, overall: 55 },
            clutchScore: 79.5,
            championshipFactors: {
                clutchGene: 82,
                killerInstinct: 77,
                flowState: 80,
                mentalFortress: 85,
                winnerDNA: 78
            },
            trend: 'up',
            injuryStatus: 'healthy',
            lastUpdated: '2025-03-10'
        },
        notes: 'Big arm with championship potential; developing consistent rhythm.'
    },
    {
        id: 'ncaaf-utex-001',
        name: 'Quinn Ewers',
        league: 'NCAAF',
        team: 'Texas Longhorns',
        position: 'QB',
        age: 22,
        physical: { height: "6'2\"", weight: '205 lbs' },
        stats: { passing: { completions: 272, attempts: 394, yards: 3479, TDs: 22, INT: 6 } },
        analytics: {
            advancedMetrics: { cleanPocketCompPct: 74.1, underPressureCompPct: 45.2, deepBallAccuracy: 48.3 },
            scoutingGrades: { arm: 60, anticipation: 55, processing: 55, pocket: 55, offPlatform: 60, overall: 60 },
            clutchScore: 89.7,
            championshipFactors: {
                clutchGene: 92,
                killerInstinct: 88,
                flowState: 91,
                mentalFortress: 87,
                winnerDNA: 95
            },
            trend: 'up',
            injuryStatus: 'healthy',
            lastUpdated: '2025-03-10'
        },
        notes: 'Championship-caliber arm talent with elite clutch gene activation.'
    }
];

// ============== STATE MANAGEMENT ==============

const initialState = {
    // Core navigation
    currentTab: "dashboard",
    sidebarOpen: false,
    
    // Championship mode
    championshipMode: true,
    liveStream: true,
    
    // Player/Scouting
    selectedPlayerId: 'mlb-stl-001',
    searchQuery: '',
    activeLeagues: Object.keys(LEAGUES),
    focusTeam: 'all',
    sortBy: 'clutch',
    
    // Live performance simulation
    running: true,
    tick: 0,
    speed: 1,
    scenario: {
        pressure: 75, // Championship pressure
        fatigue: 30,
        momentum: 85, // High momentum
        context: "Championship Quarter",
        quarter: 4,
        scoreDiff: -3,
        home: true
    },
    streams: {
        t: [],
        readiness: [],
        hr: [],
        hrv: [],
        focus: [],
        anxiety: [],
        confidence: [],
        dims: null,
        patternStream: []
    },
    
    // Championship analytics
    championshipMatrix: CHAMPIONSHIP_MATRIX,
    performanceForecast: {
        probability: 92,
        trend: "up",
        confidence: 87,
        summary: "Championship trajectory based on current pattern synthesis.",
        factors: [
            { name: "Clutch Gene", impact: 28, direction: "up" },
            { name: "Flow State", impact: 24, direction: "up" },
            { name: "Mental Fortress", impact: 21, direction: "flat" },
            { name: "Winner DNA", impact: 27, direction: "up" }
        ]
    },
    
    // System health
    systemHealth: {
        status: "optimal",
        uptime: 99.97,
        latency: 72,
        processed: 12700000
    },
    
    // UI state
    notifications: [],
    loading: false,
    backgroundParticles: true,
    
    // Settings
    settings: {
        hapticFeedback: true,
        notifications: true,
        darkMode: true,
        autoSync: true,
        motionReduced: false
    }
};

function reducer(state, action) {
    switch (action.type) {
        case "SET_TAB":
            return { ...state, currentTab: action.tab };
            
        case "TOGGLE_SIDEBAR":
            return { ...state, sidebarOpen: !state.sidebarOpen };
            
        case "SET_SELECTED_PLAYER":
            return { ...state, selectedPlayerId: action.playerId };
            
        case "SET_SEARCH":
            return { ...state, searchQuery: action.query };
            
        case "TOGGLE_LEAGUE":
            const leagues = state.activeLeagues.includes(action.league)
                ? state.activeLeagues.filter(l => l !== action.league)
                : [...state.activeLeagues, action.league];
            return { ...state, activeLeagues: leagues };
            
        case "SET_SCENARIO":
            return { ...state, scenario: { ...state.scenario, ...action.patch } };
            
        case "TOGGLE_RUNNING":
            return { ...state, running: !state.running };
            
        case "SET_SPEED":
            return { ...state, speed: action.speed };
            
        case "TICK": {
            const newStreams = updateStreams(state);
            const newForecast = updateForecast(state);
            return { 
                ...state, 
                streams: newStreams, 
                performanceForecast: newForecast,
                tick: state.tick + 1 
            };
        }
        
        case "ADD_NOTIFICATION":
            return { 
                ...state, 
                notifications: [action.notification, ...state.notifications].slice(0, 3) 
            };
            
        case "CLEAR_NOTIFICATION":
            return { 
                ...state, 
                notifications: state.notifications.filter(n => n.id !== action.id) 
            };
            
        case "UPDATE_SETTING":
            return { 
                ...state, 
                settings: { ...state.settings, [action.key]: action.value }
            };
            
        case "TOGGLE_CHAMPIONSHIP_MODE":
            return { ...state, championshipMode: !state.championshipMode };
            
        case "RESET_STREAMS":
            return { 
                ...state, 
                streams: {
                    t: [], readiness: [], hr: [], hrv: [],
                    focus: [], anxiety: [], confidence: [], dims: null, patternStream: []
                },
                tick: 0 
            };
            
        default:
            return state;
    }
}

// Enhanced stream updates with championship factors
function updateStreams(state) {
    const { streams, tick, scenario, championshipMode } = state;
    const ns = JSON.parse(JSON.stringify(streams));
    const t = tick + 1;
    const N = 80; // Mobile-optimized history length
    
    const push = (arr, v) => {
        arr.push(v);
        if (arr.length > N) arr.shift();
    };
    
    // Championship-enhanced randomness
    const seed = Date.now() + t;
    const rand = () => (Math.sin(seed + t * 0.1) + 1) / 2;
    const noise = () => (rand() - 0.5) * 2;
    
    const fat = scenario.fatigue / 100;
    const pres = scenario.pressure / 100;
    const mom = scenario.momentum / 100;
    const champ = championshipMode ? 1.2 : 1.0; // Championship multiplier
    
    // Enhanced biometric simulation with championship factors
    const hr = Math.max(55, Math.min(200, 
        70 + 60 * pres * champ + 40 * fat + 10 * Math.sin(t / 7) + noise() * 5
    ));
    const hrv = Math.max(15, Math.min(120, 
        80 - 35 * pres - 20 * fat + 15 * mom * champ + 10 * Math.cos(t / 5) + noise() * 3
    ));
    const focus = Math.max(0, Math.min(100, 
        55 + 35 * mom * champ - 15 * fat + 20 * pres + 10 * Math.sin(t / 9) + noise() * 6
    ));
    const anxiety = Math.max(0, Math.min(100, 
        20 + 60 * pres + 10 * fat - 15 * mom * champ + 10 * Math.sin(t / 6) + noise() * 10
    ));
    const confidence = Math.max(0, Math.min(100, 
        50 + 30 * mom * champ - 10 * fat + 5 * Math.cos(t / 4) + noise() * 8
    ));
    
    // Championship readiness calculation
    const readiness = Math.max(0, Math.min(100,
        50 + (focus * 0.3) + (confidence * 0.3) - (anxiety * 0.2) + 
        (mom * champ * 0.2) - (fat * 0.15) + (championshipMode ? 10 : 0)
    ));
    
    push(ns.t, t);
    push(ns.hr, Math.round(hr));
    push(ns.hrv, Math.round(hrv));
    push(ns.focus, Math.round(focus));
    push(ns.anxiety, Math.round(anxiety));
    push(ns.confidence, Math.round(confidence));
    push(ns.readiness, Math.round(readiness));
    
    // Pattern recognition stream
    if (t % 3 === 0) { // Every 3rd tick
        const patterns = [
            "Clutch gene activation detected",
            "Flow state threshold reached",
            "Mental fortress reinforced",
            "Winner DNA expression elevated",
            "Pattern hierarchy established",
            "Decision velocity optimized"
        ];
        const pattern = patterns[Math.floor(rand() * patterns.length)];
        const confidence = (85 + Math.random() * 15).toFixed(1);
        push(ns.patternStream, {
            timestamp: Date.now(),
            pattern,
            confidence: parseFloat(confidence),
            id: `pattern_${t}`
        });
    }
    
    // Update championship dimensions
    ns.dims = {
        clutch: Math.max(0, Math.min(100, 60 + 0.3 * focus + 0.25 * confidence - 0.2 * anxiety + 25 * pres - 10 * fat + (champ - 1) * 20)),
        flow: Math.max(0, Math.min(100, 65 + 0.4 * hrv - 0.2 * hr + 0.2 * focus - 0.1 * anxiety + 10 * mom + (champ - 1) * 15)),
        fortress: Math.max(0, Math.min(100, 70 + 0.2 * confidence - 0.3 * anxiety + 0.1 * hrv + (champ - 1) * 10)),
        killer: Math.max(0, Math.min(100, 55 + 0.3 * pres + 0.2 * focus + 0.15 * mom + (champ - 1) * 25)),
        winner: Math.max(0, Math.min(100, 60 + 0.4 * mom + 0.2 * confidence - 0.1 * fat + (champ - 1) * 30))
    };
    
    return ns;
}

function updateForecast(state) {
    const { performanceForecast, streams, championshipMode } = state;
    const currentReadiness = streams.readiness[streams.readiness.length - 1] || 50;
    
    // Update probability based on current performance
    const baseProbability = performanceForecast.probability;
    const readinessFactor = (currentReadiness - 50) / 50; // -1 to 1
    const championshipBoost = championshipMode ? 5 : 0;
    const newProbability = Math.max(0, Math.min(100, 
        baseProbability + readinessFactor * 2 + championshipBoost + (Math.random() - 0.5) * 3
    ));
    
    return {
        ...performanceForecast,
        probability: Math.round(newProbability * 10) / 10,
        confidence: Math.max(75, Math.min(95, performanceForecast.confidence + (Math.random() - 0.5) * 2))
    };
}

// ============== UI COMPONENTS ==============

// Championship Header Component
const ChampionshipHeader = ({ state, dispatch }) => {
    const selectedPlayer = PLAYER_DATABASE.find(p => p.id === state.selectedPlayerId);
    const currentReadiness = state.streams.readiness[state.streams.readiness.length - 1] || 0;
    
    return (
        <motion.header 
            className="championship-header safe-area-inset-top px-4"
            initial={{ y: -72 }}
            animate={{ y: 0 }}
        >
            <div className="flex items-center justify-between w-full max-w-7xl mx-auto">
                {/* Logo & Branding */}
                <div className="flex items-center gap-3">
                    <motion.div 
                        className="w-10 h-10 rounded-lg bg-blaze-primary flex items-center justify-center text-xl font-black text-black"
                        animate={{ rotate: state.running ? 360 : 0 }}
                        transition={{ duration: 3, repeat: state.running ? Infinity : 0, ease: "linear" }}
                    >
                        B
                    </motion.div>
                    <div>
                        <h1 className="text-lg font-bold gradient-text font-orbitron">
                            Blaze Intelligence
                        </h1>
                        <p className="text-xs text-gray-400">Championship Platform</p>
                    </div>
                    {state.championshipMode && <span className="tag">LIVE</span>}
                </div>
                
                {/* Center Status */}
                <div className="hidden md:flex items-center gap-4">
                    <div className="text-center">
                        <motion.div 
                            className="text-2xl font-bold gradient-text font-orbitron"
                            key={Math.floor(currentReadiness)}
                            animate={{ scale: [1, 1.1, 1] }}
                            transition={{ duration: 0.3 }}
                        >
                            {currentReadiness}%
                        </motion.div>
                        <div className="text-xs text-gray-400">Team Readiness</div>
                    </div>
                </div>
                
                {/* Right Controls */}
                <div className="flex items-center gap-3">
                    <div className="health-indicator hidden sm:flex">
                        <div className="health-dot"></div>
                        <span>{state.systemHealth.uptime}% System Health</span>
                    </div>
                    
                    <button 
                        onClick={() => dispatch({ type: "TOGGLE_SIDEBAR" })}
                        className="touch-target p-2 rounded-lg glass-light haptic"
                    >
                        <i className="fas fa-bars text-orange-400"></i>
                    </button>
                </div>
            </div>
        </motion.header>
    );
};

// Mobile Navigation with Championship Icons
const MobileNavigation = ({ currentTab, onTabChange }) => {
    const tabs = [
        { id: "dashboard", icon: "fa-tachometer-alt", label: "Command" },
        { id: "scouting", icon: "fa-search-plus", label: "Scout" },
        { id: "analytics", icon: "fa-chart-area", label: "Intel" },
        { id: "championship", icon: "fa-trophy", label: "Champions" },
        { id: "tools", icon: "fa-tools", label: "Tools" }
    ];
    
    return (
        <nav className="mobile-nav safe-area-inset-bottom">
            <div className="flex justify-around py-2">
                {tabs.map(tab => (
                    <motion.button
                        key={tab.id}
                        onClick={() => onTabChange(tab.id)}
                        className={`touch-target flex flex-col items-center justify-center p-2 rounded-lg transition-all haptic ${
                            currentTab === tab.id 
                                ? 'text-orange-400 bg-orange-400/20' 
                                : 'text-gray-400 hover:text-white'
                        }`}
                        whileTap={{ scale: 0.9 }}
                    >
                        <i className={`fas ${tab.icon} text-lg mb-1`}></i>
                        <div className="text-xs font-medium">{tab.label}</div>
                    </motion.button>
                ))}
            </div>
        </nav>
    );
};

// Enhanced Championship Enigma Gauge
const ChampionshipEnigmaGauge = ({ value = 0, size = 140, label = "ENIGMA", showFactors = false, factors = null }) => {
    const circumference = 2 * Math.PI * (size / 2 - 15);
    const strokeDasharray = circumference;
    const strokeDashoffset = circumference - (value / 100) * circumference;
    
    let color = "#ef4444"; // Red for low
    if (value >= 90) color = "#10b981"; // Championship green
    else if (value >= 80) color = "#f59e0b"; // Elite yellow
    else if (value >= 70) color = "#3b82f6"; // Good blue
    
    return (
        <div className="relative flex flex-col items-center">
            <div className="enigma-gauge pulse-championship" style={{ width: size, height: size }}>
                <svg width={size} height={size} className="transform -rotate-90">
                    <defs>
                        <linearGradient id={`gradient-${label}`} x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style={{ stopColor: color, stopOpacity: 0.8 }} />
                            <stop offset="100%" style={{ stopColor: '#FFD700', stopOpacity: 1 }} />
                        </linearGradient>
                    </defs>
                    <circle
                        cx={size / 2}
                        cy={size / 2}
                        r={size / 2 - 15}
                        stroke="rgba(255, 255, 255, 0.1)"
                        strokeWidth="8"
                        fill="transparent"
                    />
                    <motion.circle
                        cx={size / 2}
                        cy={size / 2}
                        r={size / 2 - 15}
                        stroke={`url(#gradient-${label})`}
                        strokeWidth="8"
                        fill="transparent"
                        strokeLinecap="round"
                        strokeDasharray={strokeDasharray}
                        initial={{ strokeDashoffset: circumference }}
                        animate={{ strokeDashoffset }}
                        transition={{ duration: 2, ease: "easeOut" }}
                    />
                </svg>
                
                <div className="absolute inset-0 flex flex-col items-center justify-center">
                    <motion.div 
                        className="text-3xl font-black gradient-text font-orbitron"
                        initial={{ scale: 0 }}
                        animate={{ scale: 1 }}
                        key={Math.floor(value)}
                        transition={{ type: "spring", stiffness: 300, damping: 20 }}
                    >
                        {Math.round(value)}
                    </motion.div>
                    <div className="text-xs text-gray-400 font-bold tracking-wider">{label}</div>
                </div>
            </div>
            
            {showFactors && factors && (
                <div className="mt-4 grid grid-cols-2 gap-2 w-full max-w-xs">
                    {Object.entries(factors).slice(0, 4).map(([key, val]) => (
                        <div key={key} className="text-center p-2 glass-light rounded-lg">
                            <div className="text-sm font-bold text-orange-400">{Math.round(val)}</div>
                            <div className="text-xs text-gray-400 capitalize">{key.replace(/([A-Z])/g, ' $1').trim()}</div>
                        </div>
                    ))}
                </div>
            )}
        </div>
    );
};

// Live Pattern Stream Component
const LivePatternStream = ({ patterns, maxVisible = 8 }) => {
    return (
        <div className="glass rounded-2xl p-4">
            <div className="flex items-center gap-2 mb-4">
                <i className="fas fa-brain text-purple-400"></i>
                <h3 className="text-lg font-semibold text-white">Live Pattern Recognition</h3>
                <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
            </div>
            
            <div className="space-y-2 max-h-64 overflow-y-auto no-scrollbar">
                <AnimatePresence>
                    {patterns.slice(0, maxVisible).map((item, index) => (
                        <motion.div
                            key={item.id}
                            initial={{ opacity: 0, x: -20 }}
                            animate={{ opacity: 1, x: 0 }}
                            exit={{ opacity: 0, x: 20 }}
                            className="flex items-center justify-between p-3 rounded-lg bg-gray-800/50 border border-gray-700/50"
                        >
                            <div className="flex-1">
                                <p className="text-sm text-gray-200">{item.pattern}</p>
                                <p className="text-xs text-gray-500">
                                    {new Date(item.timestamp).toLocaleTimeString()}
                                </p>
                            </div>
                            <div className="text-right">
                                <div className="text-sm font-bold text-orange-400">
                                    {item.confidence.toFixed(1)}%
                                </div>
                                <div className="text-xs text-gray-400">Confidence</div>
                            </div>
                        </motion.div>
                    ))}
                </AnimatePresence>
            </div>
        </div>
    );
};

// Championship Dashboard Tab
const ChampionshipDashboard = ({ state, dispatch }) => {
    const selectedPlayer = PLAYER_DATABASE.find(p => p.id === state.selectedPlayerId);
    const currentReadiness = state.streams.readiness[state.streams.readiness.length - 1] || 0;
    const league = selectedPlayer ? LEAGUES[selectedPlayer.league] : null;
    
    return (
        <div className="p-4 space-y-6 pb-24 bg-blaze-dark min-h-screen grid-bg">
            {/* Hero Section with Enhanced Player Display */}
            <motion.div 
                className="glass rounded-3xl p-6"
                initial={{ opacity: 0, y: 30 }}
                animate={{ opacity: 1, y: 0 }}
            >
                {selectedPlayer && (
                    <div className="text-center mb-6">
                        <div className="flex items-center justify-center gap-2 mb-3">
                            <span className={`px-4 py-2 rounded-full text-sm font-bold ${league?.cssClass}`}>
                                {league?.icon} {league?.name}
                            </span>
                            <span className="tag">
                                <i className="fas fa-crown"></i>
                                {selectedPlayer.analytics.trend.toUpperCase()}
                            </span>
                        </div>
                        <h2 className="text-2xl font-bold text-white mb-2">
                            {selectedPlayer.name}
                        </h2>
                        <p className="text-orange-400 font-semibold text-lg">
                            {selectedPlayer.position} | {selectedPlayer.team}
                        </p>
                    </div>
                )}
                
                <div className="flex justify-center mb-6">
                    <ChampionshipEnigmaGauge 
                        value={selectedPlayer?.analytics.clutchScore || currentReadiness}
                        size={160}
                        label="CHAMPION"
                        showFactors={true}
                        factors={selectedPlayer?.analytics.championshipFactors}
                    />
                </div>
            </motion.div>
            
            {/* Live Metrics Grid */}
            <motion.div 
                className="glass rounded-2xl p-6"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.2 }}
            >
                <h3 className="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                    <i className="fas fa-heartbeat text-orange-400"></i>
                    Championship Vitals
                    <div className="w-2 h-2 bg-green-400 rounded-full animate-pulse ml-auto"></div>
                </h3>
                
                <div className="grid grid-cols-2 gap-4 mb-6">
                    <BiometricCard 
                        title="Heart Rate" 
                        value={state.streams.hr?.[state.streams.hr.length - 1] || 0}
                        unit="bpm"
                        color="#ef4444"
                        icon="fa-heartbeat"
                        trend={state.streams.hr?.length > 1 ? 
                            state.streams.hr[state.streams.hr.length - 1] - state.streams.hr[state.streams.hr.length - 2] : 0
                        }
                    />
                    <BiometricCard 
                        title="HRV" 
                        value={state.streams.hrv?.[state.streams.hrv.length - 1] || 0}
                        unit="ms"
                        color="#3b82f6"
                        icon="fa-wave-square"
                        trend={state.streams.hrv?.length > 1 ? 
                            state.streams.hrv[state.streams.hrv.length - 1] - state.streams.hrv[state.streams.hrv.length - 2] : 0
                        }
                    />
                    <BiometricCard 
                        title="Focus Level" 
                        value={state.streams.focus?.[state.streams.focus.length - 1] || 0}
                        unit="%"
                        color="#10b981"
                        icon="fa-bullseye"
                        trend={state.streams.focus?.length > 1 ? 
                            state.streams.focus[state.streams.focus.length - 1] - state.streams.focus[state.streams.focus.length - 2] : 0
                        }
                    />
                    <BiometricCard 
                        title="Confidence" 
                        value={state.streams.confidence?.[state.streams.confidence.length - 1] || 0}
                        unit="%"
                        color="#f59e0b"
                        icon="fa-trophy"
                        trend={state.streams.confidence?.length > 1 ? 
                            state.streams.confidence[state.streams.confidence.length - 1] - state.streams.confidence[state.streams.confidence.length - 2] : 0
                        }
                    />
                </div>
                
                {/* Championship Performance Chart */}
                <div className="h-40 mb-4">
                    <ResponsiveContainer width="100%" height="100%">
                        <AreaChart data={state.streams.readiness.map((v, i) => ({ 
                            time: i, 
                            readiness: v,
                            focus: state.streams.focus[i] || 0,
                            confidence: state.streams.confidence[i] || 0
                        }))}>
                            <defs>
                                <linearGradient id="colorChampionship" x1="0" y1="0" x2="0" y2="1">
                                    <stop offset="5%" stopColor="#FF6B35" stopOpacity={0.8} />
                                    <stop offset="50%" stopColor="#FFA500" stopOpacity={0.4} />
                                    <stop offset="95%" stopColor="#FFD700" stopOpacity={0} />
                                </linearGradient>
                            </defs>
                            <XAxis dataKey="time" hide />
                            <YAxis domain={[0, 100]} hide />
                            <Tooltip 
                                contentStyle={{ 
                                    background: 'rgba(15, 23, 42, 0.9)', 
                                    border: '1px solid rgba(255, 107, 53, 0.3)',
                                    borderRadius: '12px',
                                    color: '#fff'
                                }} 
                            />
                            <Area
                                type="monotone"
                                dataKey="readiness"
                                stroke="#FF6B35"
                                strokeWidth={3}
                                fillOpacity={1}
                                fill="url(#colorChampionship)"
                            />
                            <Area
                                type="monotone"
                                dataKey="focus"
                                stroke="#10b981"
                                strokeWidth={2}
                                fill="transparent"
                                strokeDasharray="5,5"
                            />
                            <Area
                                type="monotone"
                                dataKey="confidence"
                                stroke="#f59e0b"
                                strokeWidth={2}
                                fill="transparent"
                                strokeDasharray="3,3"
                            />
                        </AreaChart>
                    </ResponsiveContainer>
                </div>
            </motion.div>
            
            {/* Live Pattern Recognition */}
            <motion.div
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.3 }}
            >
                <LivePatternStream patterns={state.streams.patternStream} />
            </motion.div>
            
            {/* Championship Controls */}
            <motion.div 
                className="glass rounded-2xl p-6"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.4 }}
            >
                <h3 className="text-lg font-semibold text-white mb-4">Championship Controls</h3>
                <div className="grid grid-cols-2 gap-4">
                    <button 
                        onClick={() => dispatch({ type: "TOGGLE_RUNNING" })}
                        className={`flex items-center justify-center gap-2 p-4 rounded-xl font-bold text-white transition-all haptic ${
                            state.running 
                                ? 'bg-red-500 hover:bg-red-600 shadow-lg shadow-red-500/25' 
                                : 'bg-green-500 hover:bg-green-600 shadow-lg shadow-green-500/25'
                        }`}
                    >
                        <i className={`fas ${state.running ? 'fa-pause' : 'fa-play'}`}></i>
                        {state.running ? 'Pause Engine' : 'Start Engine'}
                    </button>
                    <button 
                        onClick={() => dispatch({ type: "TOGGLE_CHAMPIONSHIP_MODE" })}
                        className={`flex items-center justify-center gap-2 p-4 rounded-xl font-bold text-white transition-all haptic ${
                            state.championshipMode
                                ? 'bg-orange-500 hover:bg-orange-600 shadow-lg shadow-orange-500/25'
                                : 'bg-gray-600 hover:bg-gray-700'
                        }`}
                    >
                        <i className="fas fa-crown"></i>
                        Championship Mode
                    </button>
                </div>
            </motion.div>
        </div>
    );
};

// Enhanced Biometric Card with Trend Indicators
const BiometricCard = ({ title, value, unit, color, icon, trend = 0 }) => (
    <div className="glass-light rounded-xl p-4 relative overflow-hidden">
        <div className="flex items-center justify-between mb-3">
            <i className={`fas ${icon} text-gray-400 text-lg`}></i>
            <div className="flex items-center gap-1">
                {trend > 0 && <i className="fas fa-arrow-up text-green-400 text-xs"></i>}
                {trend < 0 && <i className="fas fa-arrow-down text-red-400 text-xs"></i>}
                {trend === 0 && <i className="fas fa-minus text-gray-400 text-xs"></i>}
                <div className="text-xs text-gray-400">{Math.abs(trend).toFixed(1)}</div>
            </div>
        </div>
        <div className="text-center">
            <div className="text-2xl font-bold mb-1" style={{ color }}>
                {value}<span className="text-sm">{unit}</span>
            </div>
            <div className="text-xs text-gray-400 font-medium">{title}</div>
        </div>
        
        {/* Subtle background animation */}
        <div 
            className="absolute inset-0 opacity-5"
            style={{
                background: `linear-gradient(135deg, ${color}20, transparent)`,
            }}
        />
    </div>
);

// Championship Tab Component
const ChampionshipTab = ({ state, dispatch }) => {
    return (
        <div className="p-4 space-y-6 pb-24 bg-blaze-dark min-h-screen">
            <motion.div 
                className="text-center mb-8"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
            >
                <h2 className="text-3xl font-bold gradient-text font-orbitron mb-2">
                    Championship Matrix
                </h2>
                <p className="text-gray-400">Real-time championship readiness across focus teams</p>
            </motion.div>
            
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {Object.entries(state.championshipMatrix).map(([team, data], index) => (
                    <motion.div
                        key={team}
                        className="glass rounded-2xl p-6 text-center hover:scale-105 transition-transform"
                        initial={{ opacity: 0, y: 30 }}
                        animate={{ opacity: 1, y: 0 }}
                        transition={{ delay: index * 0.1 }}
                    >
                        <h3 className="text-xl font-bold capitalize mb-4 text-white">
                            {team === 'cardinals' && '⚾ St. Louis Cardinals'}
                            {team === 'titans' && '🏈 Tennessee Titans'}
                            {team === 'longhorns' && '🤘 Texas Longhorns'}
                            {team === 'grizzlies' && '🐻 Memphis Grizzlies'}
                        </h3>
                        
                        <div className="mb-4">
                            <ChampionshipEnigmaGauge 
                                value={data.readiness}
                                size={120}
                                label="READY"
                            />
                        </div>
                        
                        <div className="grid grid-cols-2 gap-4 mb-4">
                            <div className="text-center p-3 glass-light rounded-lg">
                                <div className="text-lg font-bold text-blue-400">{data.momentum}%</div>
                                <div className="text-xs text-gray-400">Momentum</div>
                            </div>
                            <div className="text-center p-3 glass-light rounded-lg">
                                <div className="text-lg font-bold text-green-400">
                                    {Math.round((data.readiness + data.momentum) / 2)}%
                                </div>
                                <div className="text-xs text-gray-400">Overall</div>
                            </div>
                        </div>
                        
                        <span className="tag text-sm px-4 py-2">
                            <i className="fas fa-target mr-2"></i>
                            {data.projection}
                        </span>
                    </motion.div>
                ))}
            </div>
            
            {/* Performance Forecast */}
            <motion.div
                className="glass rounded-2xl p-6"
                initial={{ opacity: 0, y: 20 }}
                animate={{ opacity: 1, y: 0 }}
                transition={{ delay: 0.5 }}
            >
                <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <i className="fas fa-crystal-ball text-purple-400"></i>
                    Performance Forecast
                </h3>
                
                <div className="grid md:grid-cols-2 gap-6">
                    <div className="text-center">
                        <div className="text-6xl font-black gradient-text font-orbitron mb-2">
                            {state.performanceForecast.probability}%
                        </div>
                        <div className="text-gray-400 mb-4">Championship Probability</div>
                        <div className="flex items-center justify-center gap-2">
                            <div className="flex-1 h-3 bg-gray-700 rounded-full overflow-hidden">
                                <motion.div 
                                    className="h-full bg-gradient-to-r from-orange-500 to-gold rounded-full"
                                    initial={{ width: 0 }}
                                    animate={{ width: `${state.performanceForecast.probability}%` }}
                                    transition={{ duration: 2, ease: "easeOut" }}
                                />
                            </div>
                            <span className="text-sm text-gray-400">
                                {state.performanceForecast.confidence}% confidence
                            </span>
                        </div>
                    </div>
                    
                    <div>
                        <h4 className="font-semibold text-white mb-3">Key Factors</h4>
                        <div className="space-y-2">
                            {state.performanceForecast.factors.map((factor, i) => (
                                <div key={i} className="flex items-center justify-between p-2 rounded bg-gray-800/50">
                                    <span className="text-sm text-gray-300">{factor.name}</span>
                                    <div className="flex items-center gap-2">
                                        <div className="text-sm font-bold text-orange-400">
                                            {factor.impact}%
                                        </div>
                                        <i className={`fas fa-arrow-${
                                            factor.direction === 'up' ? 'up text-green-400' :
                                            factor.direction === 'down' ? 'down text-red-400' :
                                            'right text-gray-400'
                                        } text-xs`}></i>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
                
                <div className="mt-6 p-4 bg-gray-800/30 rounded-lg">
                    <p className="text-sm text-gray-300 italic">
                        "{state.performanceForecast.summary}"
                    </p>
                </div>
            </motion.div>
        </div>
    );
};

// Enhanced Scouting Tab (keeping from original)
const ScoutingTab = ({ state, dispatch }) => {
    const filteredPlayers = useMemo(() => {
        return PLAYER_DATABASE.filter(player => {
            const matchesSearch = state.searchQuery === '' || 
                player.name.toLowerCase().includes(state.searchQuery.toLowerCase()) ||
                player.team.toLowerCase().includes(state.searchQuery.toLowerCase()) ||
                player.position.toLowerCase().includes(state.searchQuery.toLowerCase());
                
            const matchesLeague = state.activeLeagues.includes(player.league);
            
            return matchesSearch && matchesLeague;
        }).sort((a, b) => {
            if (state.sortBy === 'clutch') {
                return (b.analytics.clutchScore || 0) - (a.analytics.clutchScore || 0);
            }
            return a.name.localeCompare(b.name);
        });
    }, [state.searchQuery, state.activeLeagues, state.sortBy]);
    
    const selectedPlayer = PLAYER_DATABASE.find(p => p.id === state.selectedPlayerId);
    
    return (
        <div className="flex flex-col h-full bg-blaze-dark">
            {/* Search and Filters */}
            <div className="p-4 space-y-4">
                <div className="relative">
                    <i className="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-orange-400"></i>
                    <input
                        type="text"
                        placeholder="Search championship players..."
                        value={state.searchQuery}
                        onChange={(e) => dispatch({ type: "SET_SEARCH", query: e.target.value })}
                        className="w-full pl-10 pr-4 py-3 bg-gray-800 border border-orange-400/30 rounded-xl text-white placeholder-gray-400 focus:border-orange-400 focus:outline-none"
                    />
                </div>
                
                <div className="flex gap-2 overflow-x-auto no-scrollbar">
                    {Object.entries(LEAGUES).map(([key, league]) => (
                        <button
                            key={key}
                            onClick={() => dispatch({ type: "TOGGLE_LEAGUE", league: key })}
                            className={`px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-all haptic ${
                                state.activeLeagues.includes(key)
                                    ? `${league.cssClass} text-white shadow-lg`
                                    : 'bg-gray-700 text-gray-300 hover:bg-gray-600'
                            }`}
                        >
                            {league.icon} {league.name}
                        </button>
                    ))}
                </div>
            </div>
            
            {/* Player List */}
            <div className="flex-1 overflow-y-auto no-scrollbar px-4">
                <div className="space-y-4 pb-24">
                    {filteredPlayers.map(player => {
                        const league = LEAGUES[player.league];
                        const isSelected = player.id === state.selectedPlayerId;
                        
                        return (
                            <motion.button
                                key={player.id}
                                onClick={() => dispatch({ type: "SET_SELECTED_PLAYER", playerId: player.id })}
                                className={`w-full text-left p-5 rounded-xl border transition-all haptic ${
                                    isSelected 
                                        ? 'glass border-orange-400 shadow-lg shadow-orange-400/25' 
                                        : 'glass-light border-gray-600 hover:border-orange-300'
                                }`}
                                whileHover={{ scale: 1.02 }}
                                whileTap={{ scale: 0.98 }}
                                layout
                            >
                                <div className="flex justify-between items-start">
                                    <div className="flex-1">
                                        <div className="flex items-center gap-2 mb-2">
                                            <span className={`px-2 py-1 rounded text-xs font-bold ${league.cssClass}`}>
                                                {league.icon}
                                            </span>
                                            <span className="text-xs text-gray-400 font-semibold">
                                                {player.position}
                                            </span>
                                            <span className="text-xs text-green-400">
                                                Age {player.age}
                                            </span>
                                        </div>
                                        <h3 className="font-bold text-white text-lg mb-1">{player.name}</h3>
                                        <p className="text-sm text-gray-400">{player.team}</p>
                                        
                                        {/* Championship Factors Preview */}
                                        {player.analytics.championshipFactors && (
                                            <div className="flex gap-2 mt-3">
                                                {Object.entries(player.analytics.championshipFactors).slice(0, 3).map(([key, val]) => (
                                                    <div key={key} className="text-center">
                                                        <div className="text-xs font-bold text-orange-400">
                                                            {Math.round(val)}
                                                        </div>
                                                        <div className="text-xs text-gray-500 capitalize">
                                                            {key.replace(/([A-Z])/g, ' $1').trim().substring(0, 5)}
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                    <div className="text-right ml-4">
                                        <div className="text-2xl font-bold gradient-text font-orbitron">
                                            {player.analytics.clutchScore.toFixed(1)}
                                        </div>
                                        <div className="text-xs text-gray-400 font-bold">CHAMPION</div>
                                    </div>
                                </div>
                            </motion.button>
                        );
                    })}
                </div>
            </div>
        </div>
    );
};

// Tools Tab Component (simplified for mobile)
const ToolsTab = () => (
    <div className="p-4 space-y-6 pb-24 bg-blaze-dark min-h-screen">
        <motion.div 
            className="text-center mb-8"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
        >
            <h2 className="text-3xl font-bold gradient-text font-orbitron mb-2">
                Championship Tools
            </h2>
            <p className="text-gray-400">Advanced analytics and pattern recognition</p>
        </motion.div>
        
        <div className="grid grid-cols-2 gap-4">
            {[
                { icon: 'fa-brain', title: 'MCP Runner', desc: 'Pattern tools', color: 'purple' },
                { icon: 'fa-cloud', title: 'Edge API', desc: 'Cloudflare Workers', color: 'sky' },
                { icon: 'fa-database', title: 'Analytics', desc: 'Data processing', color: 'green' },
                { icon: 'fa-tools', title: 'Utilities', desc: 'System tools', color: 'orange' }
            ].map((tool, i) => (
                <motion.div
                    key={tool.title}
                    className="glass rounded-2xl p-6 text-center"
                    initial={{ opacity: 0, y: 30 }}
                    animate={{ opacity: 1, y: 0 }}
                    transition={{ delay: i * 0.1 }}
                >
                    <div className={`w-16 h-16 rounded-full bg-${tool.color}-500/20 flex items-center justify-center mx-auto mb-4`}>
                        <i className={`fas ${tool.icon} text-2xl text-${tool.color}-400`}></i>
                    </div>
                    <h3 className="font-bold text-white mb-2">{tool.title}</h3>
                    <p className="text-sm text-gray-400">{tool.desc}</p>
                </motion.div>
            ))}
        </div>
        
        <motion.div
            className="glass rounded-2xl p-6"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
            transition={{ delay: 0.5 }}
        >
            <h3 className="text-lg font-semibold text-white mb-4">System Status</h3>
            <div className="space-y-3">
                {PLATFORM_METRICS.map((metric, i) => (
                    <div key={i} className="flex items-center justify-between p-3 rounded-lg bg-gray-800/50">
                        <span className="text-sm text-gray-300">{metric.label}</span>
                        <div className="flex items-center gap-2">
                            <span className="text-sm font-bold text-orange-400">{metric.value}</span>
                            <span className="text-xs text-gray-500">{metric.unit}</span>
                        </div>
                    </div>
                ))}
            </div>
        </motion.div>
    </div>
);

// Analytics Tab (keeping simplified version)
const AnalyticsTab = ({ state }) => (
    <div className="p-4 space-y-6 pb-24 bg-blaze-dark min-h-screen">
        <motion.div 
            className="glass rounded-2xl p-6"
            initial={{ opacity: 0, y: 20 }}
            animate={{ opacity: 1, y: 0 }}
        >
            <h2 className="text-xl font-bold text-white mb-6 flex items-center gap-2">
                <i className="fas fa-chart-line text-orange-400"></i>
                Championship Analytics
            </h2>
            <div className="text-center p-8">
                <i className="fas fa-chart-area fa-4x text-orange-400 mb-4 opacity-50"></i>
                <p className="text-gray-400">Advanced analytics dashboard coming soon</p>
                <div className="mt-4">
                    <div className="loading-spinner mx-auto"></div>
                </div>
            </div>
        </motion.div>
    </div>
);

// Enhanced Sidebar with Championship Controls
const ChampionshipSidebar = ({ isOpen, onClose, state, dispatch }) => {
    return (
        <AnimatePresence>
            {isOpen && (
                <>
                    <motion.div
                        className="fixed inset-0 z-40 bg-black/60 backdrop-blur-sm"
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        exit={{ opacity: 0 }}
                        onClick={onClose}
                    />
                    <motion.div
                        className="fixed right-0 top-0 bottom-0 w-80 max-w-[90vw] glass z-50 overflow-y-auto safe-area-inset-top"
                        initial={{ x: "100%" }}
                        animate={{ x: 0 }}
                        exit={{ x: "100%" }}
                        transition={{ type: "spring", damping: 25, stiffness: 300 }}
                    >
                        <div className="p-6">
                            <div className="flex items-center justify-between mb-6">
                                <div>
                                    <h2 className="text-xl font-bold gradient-text">Championship Controls</h2>
                                    <p className="text-sm text-gray-400">Real-time scenario tuning</p>
                                </div>
                                <button
                                    onClick={onClose}
                                    className="p-2 rounded-lg glass-light haptic"
                                >
                                    <i className="fas fa-times text-white"></i>
                                </button>
                            </div>
                            
                            {/* Scenario Controls */}
                            <div className="space-y-6">
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-3">
                                        <i className="fas fa-fire text-red-400 mr-2"></i>
                                        Championship Pressure: {state.scenario.pressure}%
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={state.scenario.pressure}
                                        onChange={(e) => dispatch({ 
                                            type: "SET_SCENARIO", 
                                            patch: { pressure: parseInt(e.target.value) }
                                        })}
                                        className="w-full accent-red-400 h-2"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-3">
                                        <i className="fas fa-battery-half text-yellow-400 mr-2"></i>
                                        Fatigue Level: {state.scenario.fatigue}%
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={state.scenario.fatigue}
                                        onChange={(e) => dispatch({ 
                                            type: "SET_SCENARIO", 
                                            patch: { fatigue: parseInt(e.target.value) }
                                        })}
                                        className="w-full accent-yellow-400 h-2"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-3">
                                        <i className="fas fa-rocket text-green-400 mr-2"></i>
                                        Team Momentum: {state.scenario.momentum}%
                                    </label>
                                    <input
                                        type="range"
                                        min="0"
                                        max="100"
                                        value={state.scenario.momentum}
                                        onChange={(e) => dispatch({ 
                                            type: "SET_SCENARIO", 
                                            patch: { momentum: parseInt(e.target.value) }
                                        })}
                                        className="w-full accent-green-400 h-2"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-medium text-gray-300 mb-3">
                                        <i className="fas fa-tachometer-alt text-blue-400 mr-2"></i>
                                        Simulation Speed: {state.speed}x
                                    </label>
                                    <input
                                        type="range"
                                        min="0.5"
                                        max="4"
                                        step="0.5"
                                        value={state.speed}
                                        onChange={(e) => dispatch({ type: "SET_SPEED", speed: parseFloat(e.target.value) })}
                                        className="w-full accent-blue-400 h-2"
                                    />
                                </div>
                            </div>
                            
                            {/* Quick Presets */}
                            <div className="mt-8">
                                <h3 className="text-lg font-semibold text-white mb-4">Championship Scenarios</h3>
                                <div className="space-y-3">
                                    {[
                                        { name: 'Game 7 Finals', pressure: 95, fatigue: 60, momentum: 50 },
                                        { name: 'Clutch Moment', pressure: 85, fatigue: 40, momentum: 75 },
                                        { name: 'Dominant Performance', pressure: 30, fatigue: 20, momentum: 95 },
                                        { name: 'Comeback Drive', pressure: 70, fatigue: 50, momentum: 85 }
                                    ].map((preset) => (
                                        <button
                                            key={preset.name}
                                            onClick={() => dispatch({ 
                                                type: "SET_SCENARIO", 
                                                patch: { 
                                                    pressure: preset.pressure, 
                                                    fatigue: preset.fatigue, 
                                                    momentum: preset.momentum 
                                                }
                                            })}
                                            className="w-full p-3 text-left rounded-lg glass-light hover:bg-white/20 transition-colors"
                                        >
                                            <div className="font-medium text-white">{preset.name}</div>
                                            <div className="text-xs text-gray-400 mt-1">
                                                P:{preset.pressure}% F:{preset.fatigue}% M:{preset.momentum}%
                                            </div>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </motion.div>
                </>
            )}
        </AnimatePresence>
    );
};

// ============== MAIN APP COMPONENT ==============

function BlazeIntelligenceChampionshipApp() {
    const [state, dispatch] = useReducer(reducer, initialState);
    
    // Championship Simulation Loop
    useEffect(() => {
        if (!state.running) return;
        
        const interval = setInterval(() => {
            dispatch({ type: "TICK" });
        }, 800 / state.speed); // Optimized for mobile performance
        
        return () => clearInterval(interval);
    }, [state.running, state.speed]);
    
    // Tab Content Renderer
    const renderTabContent = () => {
        switch (state.currentTab) {
            case "dashboard":
                return <ChampionshipDashboard state={state} dispatch={dispatch} />;
            case "scouting":
                return <ScoutingTab state={state} dispatch={dispatch} />;
            case "analytics":
                return <AnalyticsTab state={state} dispatch={dispatch} />;
            case "championship":
                return <ChampionshipTab state={state} dispatch={dispatch} />;
            case "tools":
                return <ToolsTab />;
            default:
                return <ChampionshipDashboard state={state} dispatch={dispatch} />;
        }
    };
    
    return (
        <div className="min-h-screen bg-blaze-dark text-white overflow-hidden">
            {/* Three.js Background Particles (Championship Edition) */}
            {state.backgroundParticles && !state.settings.motionReduced && (
                <div id="bg-particles" className="fixed inset-0 z-0 pointer-events-none">
                    {/* Simplified CSS particle effect for mobile */}
                    <div className="absolute inset-0 bg-hero-glow opacity-30"></div>
                </div>
            )}
            
            <ChampionshipHeader state={state} dispatch={dispatch} />
            
            <main className="pt-20 h-full relative z-10">
                <AnimatePresence mode="wait">
                    <motion.div
                        key={state.currentTab}
                        initial={{ opacity: 0, y: 20 }}
                        animate={{ opacity: 1, y: 0 }}
                        exit={{ opacity: 0, y: -20 }}
                        transition={{ duration: 0.3 }}
                    >
                        {renderTabContent()}
                    </motion.div>
                </AnimatePresence>
            </main>
            
            <MobileNavigation 
                currentTab={state.currentTab} 
                onTabChange={(tab) => dispatch({ type: "SET_TAB", tab })} 
            />
            
            <ChampionshipSidebar 
                isOpen={state.sidebarOpen} 
                onClose={() => dispatch({ type: "TOGGLE_SIDEBAR" })} 
                state={state} 
                dispatch={dispatch} 
            />
            
            {/* Championship Notifications */}
            <AnimatePresence>
                {state.notifications.map((notification) => (
                    <motion.div
                        key={notification.id}
                        className="fixed top-24 right-4 z-50 max-w-sm glass rounded-xl p-4"
                        initial={{ x: 400, opacity: 0 }}
                        animate={{ x: 0, opacity: 1 }}
                        exit={{ x: 400, opacity: 0 }}
                        transition={{ type: "spring", damping: 25, stiffness: 300 }}
                    >
                        <div className="flex items-start gap-3">
                            <div className="text-xl">
                                {notification.type === 'championship' ? '🏆' : 
                                 notification.type === 'success' ? '✅' : 
                                 notification.type === 'warning' ? '⚠️' : 'ℹ️'}
                            </div>
                            <div className="flex-1">
                                <p className="text-sm font-medium text-white">{notification.message}</p>
                                <p className="text-xs text-gray-400 mt-1">
                                    {new Date(notification.timestamp).toLocaleTimeString()}
                                </p>
                            </div>
                            <button
                                onClick={() => dispatch({ type: "CLEAR_NOTIFICATION", id: notification.id })}
                                className="text-gray-400 hover:text-white"
                            >
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                    </motion.div>
                ))}
            </AnimatePresence>
        </div>
    );
}

// Render the Championship App
ReactDOM.render(<BlazeIntelligenceChampionshipApp />, document.getElementById('root'));
</script>
</body>
</html>