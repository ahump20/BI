<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Championship Analytics | Blaze Intelligence - Deep South Sports Authority</title>
    <meta name="description" content="Professional sports analytics platform with 91.92% Â±2.4% (BETA) model accuracy. Real-time LEAGUE-WIDE data processing and championship insights across all 30 MLB, 32 NFL, 30 NBA teams, NCAA, Texas HS, and Perfect Game baseball.">
    <meta name="keywords" content="sports analytics, baseball analytics, football analytics, MLB all teams, NFL all teams, NBA all teams, NCAA, Perfect Game, league-wide analytics, Deep South sports">

    <!-- Fonts and External Libraries -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <style>
        :root {
            --blaze-orange: #BF5700;
            --cardinal-blue: #9BCBEB;
            --tennessee-navy: #002244;
            --grizzly-teal: #00B2A9;
            --platinum: #E5E4E2;
            --graphite: #36454F;
        }

        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            color: #e2e8f0;
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
        }

        /* Glass morphism effects */
        .glass-card {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .metric-card {
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }

        .metric-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(191, 87, 0, 0.3);
            border-color: var(--blaze-orange);
        }

        /* Onboarding overlay */
        .onboarding-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .onboarding-modal {
            background: rgba(30, 41, 59, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid var(--blaze-orange);
            border-radius: 20px;
            padding: 2rem;
            max-width: 600px;
            margin: 2rem;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.9) translateY(20px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }

        /* Loading states */
        .loading-pulse {
            background: linear-gradient(90deg, rgba(191, 87, 0, 0.1) 0%, rgba(191, 87, 0, 0.3) 50%, rgba(191, 87, 0, 0.1) 100%);
            background-size: 200% 100%;
            animation: loading 2s infinite;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* Interactive elements */
        .interactive-kpi {
            position: relative;
            overflow: hidden;
        }

        .interactive-kpi::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(191, 87, 0, 0.2), transparent);
            transition: left 0.5s;
        }

        .interactive-kpi:hover::before {
            left: 100%;
        }

        /* 3D visualization container */
        #analytics3D {
            background: radial-gradient(circle at center, rgba(191, 87, 0, 0.1) 0%, transparent 70%);
            border-radius: 20px;
            position: relative;
            min-height: 400px;
        }

        /* Table enhancements */
        .data-table {
            border-collapse: separate;
            border-spacing: 0;
        }

        .data-table th {
            background: var(--blaze-orange);
            color: white;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .data-table tr:hover {
            background: rgba(191, 87, 0, 0.1);
        }

        .sortable {
            cursor: pointer;
            user-select: none;
        }

        .sortable:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        /* Filter controls */
        .filter-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        /* League-wide metrics grid */
        .league-metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        /* Dynamic metric cards */
        .dynamic-metric-card {
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* League badges */
        .league-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .mlb-badge { background: rgba(0, 123, 255, 0.2); color: #007bff; }
        .nfl-badge { background: rgba(40, 167, 69, 0.2); color: #28a745; }
        .nba-badge { background: rgba(255, 193, 7, 0.2); color: #ffc107; }
        .ncaa-badge { background: rgba(220, 53, 69, 0.2); color: #dc3545; }
        .pg-badge { background: rgba(108, 117, 125, 0.2); color: #6c757d; }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .metric-card:hover {
                transform: translateY(-4px);
            }

            .onboarding-modal {
                margin: 1rem;
                padding: 1.5rem;
            }

            .league-metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Accessibility */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>
</head>
<body>
    <!-- User Onboarding Overlay -->
    <div id="onboardingOverlay" class="onboarding-overlay" style="display: none;">
        <div class="onboarding-modal text-center">
            <div class="mb-6">
                <div class="w-20 h-20 mx-auto mb-4 bg-gradient-to-r from-orange-500 to-red-500 rounded-full flex items-center justify-center">
                    <i data-lucide="zap" class="w-10 h-10 text-white"></i>
                </div>
                <h2 class="text-2xl font-bold text-white mb-2">Welcome to LEAGUE-WIDE Analytics</h2>
                <p class="text-slate-300">Explore comprehensive sports intelligence across ALL teams in MLB, NFL, NBA, NCAA, and Perfect Game baseball.</p>
            </div>

            <div class="space-y-4 text-left mb-8">
                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                        <span class="text-white text-sm font-bold">1</span>
                    </div>
                    <div>
                        <h3 class="font-semibold text-white">LEAGUE-WIDE Performance Metrics</h3>
                        <p class="text-slate-400 text-sm">Filter by any league, division, or specific team to see detailed analytics and comparisons</p>
                    </div>
                </div>

                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-green-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                        <span class="text-white text-sm font-bold">2</span>
                    </div>
                    <div>
                        <h3 class="font-semibold text-white">Interactive 3D Visualizations</h3>
                        <p class="text-slate-400 text-sm">Explore data in three dimensions with comprehensive league-wide comparisons</p>
                    </div>
                </div>

                <div class="flex items-start space-x-3">
                    <div class="w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                        <span class="text-white text-sm font-bold">3</span>
                    </div>
                    <div>
                        <h3 class="font-semibold text-white">Advanced Filtering & Rankings</h3>
                        <p class="text-slate-400 text-sm">Use smart filters to analyze specific teams, time periods, and performance metrics</p>
                    </div>
                </div>
            </div>

            <div class="flex space-x-4">
                <button id="skipTour" class="px-6 py-3 bg-slate-700 text-white rounded-lg hover:bg-slate-600 transition-colors">
                    Skip Tour
                </button>
                <button id="startTour" class="px-6 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors">
                    Start Tour
                </button>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 bg-black/90 backdrop-blur-lg border-b border-slate-800">
        <div class="max-w-7xl mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <a href="/" class="text-2xl font-bold" style="color: var(--blaze-orange);">BLAZE INTELLIGENCE</a>
                <ul class="hidden md:flex items-center gap-8">
                    <li><a href="/features.html" class="text-slate-300 hover:text-white">Features</a></li>
                    <li><a href="/analytics.html" class="text-white font-medium">Analytics</a></li>
                    <li><a href="/vision-ai-demo.html" class="text-slate-300 hover:text-white">Vision AI</a></li>
                    <li><a href="/video-showcase.html" class="text-slate-300 hover:text-white">Videos</a></li>
                    <li><a href="/dashboard.html" class="text-slate-300 hover:text-white">Dashboard</a></li>
                    <li><a href="/data.html" class="text-slate-300 hover:text-white">Data</a></li>
                    <li><a href="/pricing.html" class="text-slate-300 hover:text-white">Pricing</a></li>
                    <li><a href="/contact.html" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600">Get Started</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 pb-16 px-4">
        <div class="max-w-7xl mx-auto text-center relative">
            <h1 class="text-5xl md:text-7xl font-black mb-6">
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-orange-500 to-red-500">
                    LEAGUE-WIDE ANALYTICS
                </span>
            </h1>
            <p class="text-xl text-slate-300 max-w-3xl mx-auto mb-4">
                Deep South Sports Intelligence platform processing 2.8M+ data points per second with <strong>89.7% Â±3.2% (BETA)</strong> model accuracy across ALL teams
            </p>
            <p class="text-sm text-slate-400">
                <a href="/methods-and-definitions.html" class="text-blue-400 hover:text-blue-300 underline" target="_blank">
                    View Methods & Definitions
                </a> | Real-time data from MLB (30), NFL (32), NBA (30), NCAA, and Perfect Game
            </p>

            <!-- Quick Tour Button -->
            <button id="tourButton" class="mt-6 px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white rounded-lg transition-colors inline-flex items-center space-x-2">
                <i data-lucide="play-circle" class="w-5 h-5"></i>
                <span>Quick Tour</span>
            </button>
        </div>
    </section>

    <!-- Live Performance Metrics -->
    <section class="py-16 px-4">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12 text-white">LEAGUE-WIDE Performance Metrics</h2>

            <!-- COMPREHENSIVE LEAGUE-WIDE Filter Controls -->
            <div class="filter-controls mb-8">
                <div class="grid md:grid-cols-4 gap-4">
                    <div class="glass-card p-4">
                        <label class="block text-sm font-medium text-slate-300 mb-2">League</label>
                        <select id="leagueFilter" class="w-full bg-slate-800 text-white border border-slate-600 rounded-lg px-3 py-2">
                            <option value="">All Leagues (92+ Teams)</option>
                            <option value="mlb">MLB (30 teams)</option>
                            <option value="nfl">NFL (32 teams)</option>
                            <option value="nba">NBA (30 teams)</option>
                            <option value="ncaa-football">NCAA Football (130+ programs)</option>
                            <option value="perfect-game">Perfect Game Youth (500+ programs)</option>
                        </select>
                    </div>

                    <div class="glass-card p-4">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Conference/Division</label>
                        <select id="divisionFilter" class="w-full bg-slate-800 text-white border border-slate-600 rounded-lg px-3 py-2">
                            <option value="">All Divisions</option>
                            <!-- Dynamic options based on league selection -->
                        </select>
                    </div>

                    <div class="glass-card p-4">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Region</label>
                        <select id="regionFilter" class="w-full bg-slate-800 text-white border border-slate-600 rounded-lg px-3 py-2">
                            <option value="">All Regions</option>
                            <option value="deep-south">Deep South Focus</option>
                            <option value="texas">Texas Teams</option>
                            <option value="sec">SEC Teams</option>
                            <option value="championship-focus">Championship Focus</option>
                        </select>
                    </div>

                    <div class="glass-card p-4">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Quick Search</label>
                        <input
                            type="text"
                            id="teamSearch"
                            placeholder="Search teams..."
                            class="w-full bg-slate-800 text-white border border-slate-600 rounded-lg px-3 py-2"
                        >
                    </div>
                </div>
            </div>

            <!-- Live Status and Active Filters Display -->
            <div class="glass-card p-4 mb-8">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <div class="w-3 h-3 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-slate-300">Live Data Active</span>
                        <span class="text-sm text-slate-500" id="lastUpdate">Updated 2s ago</span>
                    </div>
                    <div id="activeFilters" class="flex items-center space-x-2">
                        <!-- Dynamic filter chips will be populated here -->
                    </div>
                </div>
            </div>

            <!-- Dynamic LEAGUE-WIDE Metrics Grid -->
            <div id="leagueMetricsGrid" class="league-metrics-grid">
                <!-- Dynamic metric cards populated by JavaScript -->
            </div>

            <!-- 3D Visualization Section -->
            <div class="glass-card p-8 rounded-2xl mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white">Interactive LEAGUE-WIDE Performance Visualization</h3>
                    <div class="flex space-x-2">
                        <button id="reset3D" class="px-4 py-2 bg-slate-700 text-white rounded-lg hover:bg-slate-600 text-sm">
                            Reset View
                        </button>
                        <button id="animate3D" class="px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 text-sm">
                            Animate
                        </button>
                    </div>
                </div>
                <div id="analytics3D" class="w-full h-96"></div>
                <div class="mt-4 text-sm text-slate-400 text-center">
                    <span class="sr-only">3D visualization controls:</span>
                    Mouse: Rotate view | Scroll: Zoom | Click: Select data point | Filter to view specific leagues/teams
                </div>
            </div>

            <!-- Performance Chart -->
            <div class="glass-card p-8 rounded-2xl mb-12">
                <h3 class="text-xl font-bold text-white mb-6">LEAGUE-WIDE Performance Trends</h3>
                <canvas id="performanceChart" height="100"></canvas>
            </div>

            <!-- Comprehensive Data Table -->
            <div class="glass-card p-8 rounded-2xl mb-12">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-bold text-white">LEAGUE-WIDE Team Performance Data</h3>
                    <div class="flex space-x-4">
                        <input
                            type="text"
                            id="dataSearch"
                            placeholder="Search teams, players, metrics..."
                            class="px-4 py-2 bg-slate-800 text-white border border-slate-600 rounded-lg"
                        >
                        <button id="exportData" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                            Export CSV
                        </button>
                    </div>
                </div>

                <div class="overflow-x-auto">
                    <table class="data-table w-full text-sm">
                        <thead>
                            <tr>
                                <th class="sortable px-4 py-3 text-left cursor-pointer" data-sort="league">League</th>
                                <th class="sortable px-4 py-3 text-left cursor-pointer" data-sort="team">Team</th>
                                <th class="sortable px-4 py-3 text-left cursor-pointer" data-sort="player">Key Player</th>
                                <th class="sortable px-4 py-3 text-right cursor-pointer" data-sort="performance">Performance</th>
                                <th class="sortable px-4 py-3 text-right cursor-pointer" data-sort="trend">Trend</th>
                                <th class="sortable px-4 py-3 text-right cursor-pointer" data-sort="rank">Rank</th>
                                <th class="px-4 py-3 text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="dataTableBody">
                            <!-- Dynamic table content populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Analytics Capabilities -->
    <section class="py-16 px-4 bg-slate-900/30">
        <div class="max-w-7xl mx-auto">
            <h2 class="text-3xl font-bold text-center mb-12 text-white">Advanced LEAGUE-WIDE Analytics Capabilities</h2>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Predictive Analytics -->
                <div class="glass-card p-8 rounded-2xl">
                    <h3 class="text-2xl font-bold mb-6" style="color: var(--cardinal-blue);">Predictive Analytics</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Win Probability Models</span>
                            <span class="text-green-400 font-mono" title="Beta accuracy with confidence interval">91.92% Â±2.4% (BETA)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Player Performance Projection</span>
                            <span class="text-green-400 font-mono">RÂ² = 0.89</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Injury Risk Assessment</span>
                            <span class="text-green-400 font-mono">84% precision</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Draft Value Modeling</span>
                            <span class="text-green-400 font-mono">Top 15% accuracy</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">League-Wide Comparisons</span>
                            <span class="text-green-400 font-mono">92 teams covered</span>
                        </div>
                    </div>
                </div>

                <!-- Real-Time Analytics -->
                <div class="glass-card p-8 rounded-2xl">
                    <h3 class="text-2xl font-bold text-orange-400 mb-6">Real-Time Processing</h3>
                    <div class="space-y-4">
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Data Points Per Second</span>
                            <span class="text-white font-mono">2.8M+</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">API Response Time</span>
                            <span class="text-white font-mono">&lt;100ms</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Stream Processing Latency</span>
                            <span class="text-white font-mono">&lt;50ms</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Teams Monitored</span>
                            <span class="text-white font-mono">MLB (30) + NFL (32) + NBA (30)</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-slate-300">Update Frequency</span>
                            <span class="text-white font-mono">Real-time</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Call to Action -->
    <section class="py-20 px-4">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-4xl font-bold text-white mb-6">Experience LEAGUE-WIDE Championship Analytics</h2>
            <p class="text-xl text-slate-300 mb-8">Join the Deep South Sports Intelligence revolution covering ALL teams across ALL major leagues</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="/demo" class="px-8 py-4 bg-orange-500 text-white font-bold rounded-lg hover:bg-orange-600 transition-colors">
                    View Live Demo
                </a>
                <a href="/contact.html" class="px-8 py-4 bg-slate-700 text-white font-bold rounded-lg hover:bg-slate-600 transition-colors">
                    Get Custom Analysis
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black/50 border-t border-slate-800 py-8 px-4">
        <div class="max-w-7xl mx-auto text-center text-slate-400">
            <p>&copy; 2025 Blaze Intelligence. All rights reserved.</p>
            <p class="mt-2 text-sm">
                Deep South Sports Authority |
                <a href="/methods-and-definitions.html" class="underline hover:text-white">Methods & Definitions</a> |
                <a href="/privacy.html" class="underline hover:text-white">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <script>
        // LEAGUE-WIDE Analytics Dashboard Enhanced JavaScript
        class LeagueWideAnalyticsDashboard {
            constructor() {
                this.scene = null;
                this.camera = null;
                this.renderer = null;
                this.currentData = {};
                this.sortDirection = {};
                this.selectedLeague = '';
                this.selectedDivision = '';
                this.selectedTeam = '';
                this.teamDatabase = this.initTeamDatabase();
                this.init();
            }

            // Comprehensive team database for ALL leagues
            initTeamDatabase() {
                return {
                    mlb: {
                        'al-east': ['Yankees', 'Red Sox', 'Blue Jays', 'Rays', 'Orioles'],
                        'al-central': ['Guardians', 'Twins', 'White Sox', 'Tigers', 'Royals'],
                        'al-west': ['Astros', 'Angels', 'Mariners', 'Rangers', 'Athletics'],
                        'nl-east': ['Braves', 'Mets', 'Phillies', 'Marlins', 'Nationals'],
                        'nl-central': ['Cardinals', 'Brewers', 'Cubs', 'Reds', 'Pirates'],
                        'nl-west': ['Dodgers', 'Padres', 'Giants', 'Rockies', 'Diamondbacks']
                    },
                    nfl: {
                        'afc-east': ['Bills', 'Dolphins', 'Patriots', 'Jets'],
                        'afc-north': ['Ravens', 'Bengals', 'Browns', 'Steelers'],
                        'afc-south': ['Titans', 'Colts', 'Jaguars', 'Texans'],
                        'afc-west': ['Chiefs', 'Chargers', 'Raiders', 'Broncos'],
                        'nfc-east': ['Eagles', 'Cowboys', 'Giants', 'Commanders'],
                        'nfc-north': ['Lions', 'Packers', 'Vikings', 'Bears'],
                        'nfc-south': ['Saints', 'Falcons', 'Panthers', 'Buccaneers'],
                        'nfc-west': ['49ers', 'Seahawks', 'Rams', 'Cardinals']
                    },
                    nba: {
                        'eastern-atlantic': ['Celtics', '76ers', 'Nets', 'Knicks', 'Raptors'],
                        'eastern-central': ['Cavaliers', 'Bulls', 'Pacers', 'Pistons', 'Bucks'],
                        'eastern-southeast': ['Heat', 'Hawks', 'Hornets', 'Magic', 'Wizards'],
                        'western-northwest': ['Nuggets', 'Timberwolves', 'Thunder', 'Trail Blazers', 'Jazz'],
                        'western-pacific': ['Warriors', 'Lakers', 'Clippers', 'Kings', 'Suns'],
                        'western-southwest': ['Grizzlies', 'Mavericks', 'Pelicans', 'Rockets', 'Spurs']
                    },
                    'ncaa-football': {
                        'sec': ['Alabama', 'Auburn', 'Florida', 'Georgia', 'Kentucky', 'LSU', 'Mississippi State', 'Ole Miss', 'South Carolina', 'Tennessee', 'Texas A&M', 'Vanderbilt', 'Arkansas', 'Missouri', 'Texas', 'Oklahoma'],
                        'big12': ['Iowa State', 'Kansas', 'Kansas State', 'Oklahoma State', 'TCU', 'Texas Tech', 'West Virginia', 'Baylor', 'Cincinnati', 'Houston', 'UCF', 'BYU'],
                        'acc': ['Clemson', 'Duke', 'Florida State', 'Georgia Tech', 'Louisville', 'Miami', 'NC State', 'North Carolina', 'Notre Dame', 'Pittsburgh', 'Syracuse', 'Virginia', 'Virginia Tech', 'Wake Forest'],
                        'big10': ['Illinois', 'Indiana', 'Iowa', 'Maryland', 'Michigan', 'Michigan State', 'Minnesota', 'Nebraska', 'Northwestern', 'Ohio State', 'Penn State', 'Purdue', 'Rutgers', 'Wisconsin'],
                        'pac12': ['Arizona', 'Arizona State', 'California', 'Colorado', 'Oregon', 'Oregon State', 'Stanford', 'UCLA', 'USC', 'Utah', 'Washington', 'Washington State']
                    },
                    'ncaa-baseball': {
                        'sec': ['Alabama', 'Auburn', 'Florida', 'Georgia', 'Kentucky', 'LSU', 'Mississippi State', 'Ole Miss', 'South Carolina', 'Tennessee', 'Texas A&M', 'Vanderbilt', 'Arkansas', 'Missouri', 'Texas', 'Oklahoma'],
                        'big12': ['Iowa State', 'Kansas', 'Kansas State', 'Oklahoma State', 'TCU', 'Texas Tech', 'West Virginia', 'Baylor'],
                        'acc': ['Clemson', 'Duke', 'Florida State', 'Georgia Tech', 'Louisville', 'Miami', 'NC State', 'North Carolina', 'Notre Dame', 'Pittsburgh', 'Syracuse', 'Virginia', 'Virginia Tech', 'Wake Forest']
                    },
                    'high-school': {
                        'texas': ['Longhorn High', 'Mustang Prep', 'Eagle Academy', 'Titan High', 'Ranger Prep', 'Bulldog Academy', 'Wildcat High', 'Warrior Prep']
                    },
                    'perfect-game': {
                        'showcase': ['Texas Elite', 'Deep South All-Stars', 'SEC Prospects', 'Big 12 Elite', 'Southwest Showcase', 'Gulf Coast Select']
                    }
                };
            }

            async init() {
                this.initOnboarding();
                this.initEventListeners();
                this.populateTeamDropdown();
                this.init3D();
                this.initChart();
                await this.loadLeagueWideData();
                this.initFilters();
                this.initDataTable();
                lucide.createIcons();
            }

            initOnboarding() {
                const hasSeenTour = localStorage.getItem('blazeAnalyticsTour');
                if (!hasSeenTour) {
                    document.getElementById('onboardingOverlay').style.display = 'flex';
                }

                document.getElementById('tourButton').addEventListener('click', () => {
                    document.getElementById('onboardingOverlay').style.display = 'flex';
                });

                document.getElementById('skipTour').addEventListener('click', () => {
                    document.getElementById('onboardingOverlay').style.display = 'none';
                    localStorage.setItem('blazeAnalyticsTour', 'seen');
                });

                document.getElementById('startTour').addEventListener('click', () => {
                    document.getElementById('onboardingOverlay').style.display = 'none';
                    localStorage.setItem('blazeAnalyticsTour', 'seen');
                    this.startGuidedTour();
                });
            }

            initEventListeners() {
                // 3D controls
                document.getElementById('reset3D').addEventListener('click', () => this.reset3DView());
                document.getElementById('animate3D').addEventListener('click', () => this.animate3D());

                // Table controls
                const searchInput = document.getElementById('dataSearch');
                if (searchInput) {
                    searchInput.addEventListener('input', (e) => {
                        this.filterTable(e.target.value);
                    });
                }

                const exportButton = document.getElementById('exportData');
                if (exportButton) {
                    exportButton.addEventListener('click', () => this.exportTableData());
                }

                // Sort controls
                document.querySelectorAll('.sortable').forEach(header => {
                    header.addEventListener('click', () => {
                        const sortBy = header.dataset.sort;
                        this.sortTable(sortBy);
                    });
                });
            }

            populateTeamDropdown() {
                const teamSelect = document.getElementById('teamFilter');
                const leagueSelect = document.getElementById('leagueFilter');
                const divisionSelect = document.getElementById('divisionFilter');

                leagueSelect.addEventListener('change', () => {
                    this.selectedLeague = leagueSelect.value;
                    this.updateDivisionOptions();
                    this.updateTeamOptions();
                    this.applyFilters();
                });

                divisionSelect.addEventListener('change', () => {
                    this.selectedDivision = divisionSelect.value;
                    this.updateTeamOptions();
                    this.applyFilters();
                });

                teamSelect.addEventListener('change', () => {
                    this.selectedTeam = teamSelect.value;
                    this.applyFilters();
                });
            }

            updateDivisionOptions() {
                const divisionSelect = document.getElementById('divisionFilter');
                const optgroups = divisionSelect.querySelectorAll('optgroup');

                optgroups.forEach(group => {
                    group.style.display = 'none';
                });

                if (this.selectedLeague) {
                    const targetGroup = divisionSelect.querySelector(`optgroup[label*="${this.getLeagueDisplayName(this.selectedLeague)}"]`);
                    if (targetGroup) {
                        targetGroup.style.display = 'block';
                    }
                }
            }

            updateTeamOptions() {
                const teamSelect = document.getElementById('teamFilter');
                teamSelect.innerHTML = '<option value="">All Teams</option>';

                if (this.selectedLeague && this.teamDatabase[this.selectedLeague]) {
                    let teams = [];

                    if (this.selectedDivision && this.teamDatabase[this.selectedLeague][this.selectedDivision]) {
                        teams = this.teamDatabase[this.selectedLeague][this.selectedDivision];
                    } else {
                        // Show all teams in the league
                        teams = Object.values(this.teamDatabase[this.selectedLeague]).flat();
                    }

                    teams.forEach(team => {
                        const option = document.createElement('option');
                        option.value = team.toLowerCase().replace(/\s+/g, '-');
                        option.textContent = team;
                        teamSelect.appendChild(option);
                    });
                }
            }

            getLeagueDisplayName(league) {
                const names = {
                    'mlb': 'MLB',
                    'nfl': 'NFL',
                    'nba': 'NBA',
                    'ncaa-football': 'NCAA',
                    'ncaa-baseball': 'NCAA'
                };
                return names[league] || league.toUpperCase();
            }

            async loadLeagueWideData() {
                try {
                    // Simulate MCP function calls for LEAGUE-WIDE data
                    const leagueWideData = await this.fetchMCPData('league-wide-dashboard', {
                        sport: 'all',
                        includeAnalytics: true,
                        leagues: ['mlb', 'nfl', 'nba', 'ncaa-football', 'ncaa-baseball', 'perfect-game']
                    });

                    this.generateDynamicMetricCards(leagueWideData);
                    this.updateDataTable(leagueWideData.livePerformance || []);
                    this.update3DVisualization(leagueWideData.visualization || {});

                } catch (error) {
                    console.warn('MCP data fetch failed, using fallback data:', error);
                    this.loadLeagueWideFallbackData();
                }
            }

            async fetchMCPData(endpoint, params = {}) {
                // Simulate MCP server calls with realistic LEAGUE-WIDE data
                await new Promise(resolve => setTimeout(resolve, 500 + Math.random() * 1000));

                const fallbackData = {
                    'league-wide-dashboard': {
                        topPerformers: [
                            { league: 'MLB', team: 'Dodgers', metric: 'Team OPS', value: '0.891', trend: '+0.012', rank: 1 },
                            { league: 'NFL', team: 'Bills', metric: 'EPA/Play', value: '+0.21', trend: '+0.03', rank: 1 },
                            { league: 'NBA', team: 'Celtics', metric: 'Net Rating', value: '+12.4', trend: '+1.8', rank: 1 },
                            { league: 'NCAA', team: 'Longhorns', metric: 'Recruiting Rank', value: '#3', trend: '+2 spots', rank: 3 },
                            { league: 'MLB', team: 'Yankees', metric: 'Run Differential', value: '+127', trend: '+15', rank: 2 },
                            { league: 'NFL', team: 'Chiefs', metric: 'Point Differential', value: '+89', trend: '+12', rank: 2 }
                        ],
                        livePerformance: [
                            { league: 'MLB', team: 'Cardinals', player: 'P. Goldschmidt', performance: 92.3, trend: '+5.2%', rank: 12 },
                            { league: 'NFL', team: 'Titans', player: 'D. Henry', performance: 89.7, trend: '+2.1%', rank: 8 },
                            { league: 'NBA', team: 'Grizzlies', player: 'J. Morant', performance: 88.4, trend: '-1.2%', rank: 15 },
                            { league: 'NCAA', team: 'Longhorns', player: 'Q. Ewers', performance: 91.8, trend: '+7.3%', rank: 5 },
                            { league: 'MLB', team: 'Dodgers', player: 'M. Betts', performance: 95.1, trend: '+3.8%', rank: 1 },
                            { league: 'NFL', team: 'Bills', player: 'J. Allen', performance: 93.4, trend: '+4.2%', rank: 2 },
                            { league: 'NBA', team: 'Celtics', player: 'J. Tatum', performance: 90.8, trend: '+2.9%', rank: 6 },
                            { league: 'MLB', team: 'Yankees', player: 'A. Judge', performance: 94.2, trend: '+2.1%', rank: 3 }
                        ],
                        visualization: {
                            points: Array.from({length: 100}, (_, i) => ({
                                x: (Math.random() - 0.5) * 20,
                                y: (Math.random() - 0.5) * 20,
                                z: (Math.random() - 0.5) * 20,
                                performance: Math.random() * 100,
                                league: ['MLB', 'NFL', 'NBA', 'NCAA'][i % 4],
                                team: `Team ${i + 1}`
                            }))
                        }
                    }
                };

                return fallbackData[endpoint] || {};
            }

            generateDynamicMetricCards(data) {
                const container = document.getElementById('leagueMetricsGrid');
                container.innerHTML = '';

                const topPerformers = data.topPerformers || [];

                topPerformers.forEach((performer, index) => {
                    const card = this.createMetricCard(performer, index);
                    container.appendChild(card);
                });

                // Add event listeners to the new cards
                container.querySelectorAll('.metric-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.showMetricDetails(e.currentTarget.dataset.team, e.currentTarget.dataset.league);
                    });

                    card.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.showMetricDetails(e.currentTarget.dataset.team, e.currentTarget.dataset.league);
                        }
                    });
                });
            }

            createMetricCard(performer, index) {
                const card = document.createElement('div');
                card.className = 'metric-card glass-card p-6 rounded-xl text-center interactive-kpi dynamic-metric-card';
                card.setAttribute('data-team', performer.team.toLowerCase());
                card.setAttribute('data-league', performer.league.toLowerCase());
                card.setAttribute('role', 'button');
                card.setAttribute('tabindex', '0');
                card.setAttribute('aria-label', `${performer.team} ${performer.metric} metric`);

                const leagueClass = this.getLeagueBadgeClass(performer.league);
                const trendColor = performer.trend.startsWith('+') ? 'text-green-400' : 'text-red-400';
                const metricColor = this.getMetricColor(performer.league);

                card.innerHTML = `
                    <div class="league-badge ${leagueClass}">${performer.league}</div>
                    <div class="text-sm text-slate-400 mb-2">${performer.team} ${performer.metric}</div>
                    <div class="text-4xl font-black mb-2" style="color: ${metricColor};">
                        ${performer.value}
                    </div>
                    <div class="text-xs ${trendColor} mb-1">${performer.trend}</div>
                    <div class="text-xs text-slate-500">Rank #${performer.rank}</div>
                `;

                return card;
            }

            getLeagueBadgeClass(league) {
                const classes = {
                    'MLB': 'mlb-badge',
                    'NFL': 'nfl-badge',
                    'NBA': 'nba-badge',
                    'NCAA': 'ncaa-badge',
                    'PG': 'pg-badge'
                };
                return classes[league] || 'mlb-badge';
            }

            getMetricColor(league) {
                const colors = {
                    'MLB': '#007bff',
                    'NFL': '#28a745',
                    'NBA': '#ffc107',
                    'NCAA': '#dc3545',
                    'PG': '#6c757d'
                };
                return colors[league] || '#BF5700';
            }

            loadLeagueWideFallbackData() {
                // Fallback data for offline scenarios - LEAGUE-WIDE
                const fallbackTopPerformers = [
                    { league: 'MLB', team: 'Dodgers', metric: 'Team OPS', value: '0.891', trend: '+0.012', rank: 1 },
                    { league: 'NFL', team: 'Bills', metric: 'EPA/Play', value: '+0.21', trend: '+0.03', rank: 1 },
                    { league: 'NBA', team: 'Celtics', metric: 'Net Rating', value: '+12.4', trend: '+1.8', rank: 1 },
                    { league: 'NCAA', team: 'Longhorns', metric: 'Recruiting Rank', value: '#3', trend: '+2 spots', rank: 3 },
                    { league: 'MLB', team: 'Cardinals', metric: 'Readiness', value: '86.6%', trend: '+3.2%', rank: 8 },
                    { league: 'NBA', team: 'Grizzlies', metric: 'Grit Index', value: '94.8', trend: '+1.2%', rank: 4 }
                ];

                this.generateDynamicMetricCards({ topPerformers: fallbackTopPerformers });

                const sampleData = [
                    { league: 'MLB', team: 'Cardinals', player: 'P. Goldschmidt', performance: 92.3, trend: '+5.2%', rank: 12 },
                    { league: 'NFL', team: 'Titans', player: 'D. Henry', performance: 89.7, trend: '+2.1%', rank: 8 },
                    { league: 'NBA', team: 'Grizzlies', player: 'J. Morant', performance: 88.4, trend: '-1.2%', rank: 15 },
                    { league: 'NCAA', team: 'Longhorns', player: 'Q. Ewers', performance: 91.8, trend: '+7.3%', rank: 5 }
                ];

                this.updateDataTable(sampleData);
            }

            updateDataTable(data) {
                const tbody = document.getElementById('dataTableBody');
                if (!tbody) return;

                if (!data || data.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="7" class="text-center py-8 text-slate-500">No data available</td></tr>';
                    return;
                }

                tbody.innerHTML = data.map(row => {
                    const trendColor = row.trend.startsWith('+') ? 'text-green-400' : 'text-red-400';
                    const leagueClass = this.getLeagueBadgeClass(row.league);

                    return `
                        <tr class="border-b border-slate-700 hover:bg-slate-800/50 transition-colors">
                            <td class="px-4 py-3">
                                <span class="league-badge ${leagueClass}">${row.league}</span>
                            </td>
                            <td class="px-4 py-3 font-medium">${row.team}</td>
                            <td class="px-4 py-3">${row.player}</td>
                            <td class="px-4 py-3 text-right font-mono">${row.performance}</td>
                            <td class="px-4 py-3 text-right ${trendColor} font-mono">${row.trend}</td>
                            <td class="px-4 py-3 text-right font-mono">#${row.rank}</td>
                            <td class="px-4 py-3 text-center">
                                <button class="text-blue-400 hover:text-blue-300 text-sm transition-colors" onclick="analytics.showPlayerDetails('${row.player}', '${row.team}', '${row.league}')">
                                    View Details
                                </button>
                            </td>
                        </tr>
                    `;
                }).join('');
            }

            init3D() {
                const container = document.getElementById('analytics3D');
                if (!container || !window.THREE) return;

                this.scene = new THREE.Scene();
                this.camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
                this.renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });

                this.renderer.setSize(container.offsetWidth, container.offsetHeight);
                this.renderer.setClearColor(0x000000, 0);
                container.appendChild(this.renderer.domElement);

                // Add LEAGUE-WIDE 3D data points
                this.add3DDataPoints();

                this.camera.position.set(10, 10, 10);
                this.camera.lookAt(0, 0, 0);

                this.animate3DScene();
            }

            add3DDataPoints() {
                if (!this.scene) return;

                const geometry = new THREE.SphereGeometry(0.15, 12, 12);
                const leagues = ['MLB', 'NFL', 'NBA', 'NCAA'];
                const colors = [0x007bff, 0x28a745, 0xffc107, 0xdc3545];

                for (let i = 0; i < 100; i++) {
                    const leagueIndex = i % 4;
                    const material = new THREE.MeshBasicMaterial({
                        color: colors[leagueIndex],
                        transparent: true,
                        opacity: 0.8
                    });

                    const sphere = new THREE.Mesh(geometry, material);

                    sphere.position.set(
                        (Math.random() - 0.5) * 20,
                        (Math.random() - 0.5) * 20,
                        (Math.random() - 0.5) * 20
                    );

                    sphere.userData = {
                        league: leagues[leagueIndex],
                        performance: Math.random() * 100,
                        team: `Team ${i + 1}`
                    };

                    this.scene.add(sphere);
                }
            }

            animate3DScene() {
                if (!this.renderer || !this.scene || !this.camera) return;

                requestAnimationFrame(() => this.animate3DScene());

                this.scene.rotation.y += 0.003;
                this.scene.rotation.x += 0.001;
                this.renderer.render(this.scene, this.camera);
            }

            initChart() {
                const ctx = document.getElementById('performanceChart');
                if (!ctx) return;

                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Week 5', 'Week 6'],
                        datasets: [
                            {
                                label: 'MLB Average',
                                data: [82, 83, 84, 85, 86, 85.2],
                                borderColor: '#007bff',
                                backgroundColor: 'rgba(0, 123, 255, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'NFL Average',
                                data: [78, 80, 81, 83, 84, 82.8],
                                borderColor: '#28a745',
                                backgroundColor: 'rgba(40, 167, 69, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'NBA Average',
                                data: [88, 89, 90, 89, 91, 90.4],
                                borderColor: '#ffc107',
                                backgroundColor: 'rgba(255, 193, 7, 0.1)',
                                tension: 0.4
                            },
                            {
                                label: 'NCAA Average',
                                data: [85, 86, 87, 88, 89, 87.6],
                                borderColor: '#dc3545',
                                backgroundColor: 'rgba(220, 53, 69, 0.1)',
                                tension: 0.4
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#e2e8f0' }
                            }
                        },
                        scales: {
                            y: {
                                ticks: { color: '#94a3b8' },
                                grid: { color: 'rgba(148, 163, 184, 0.1)' }
                            },
                            x: {
                                ticks: { color: '#94a3b8' },
                                grid: { color: 'rgba(148, 163, 184, 0.1)' }
                            }
                        },
                        interaction: {
                            intersect: false,
                            mode: 'index'
                        }
                    }
                });
            }

            showMetricDetails(team, league) {
                // Open modal with detailed team analytics
                alert(`Detailed ${team} (${league.toUpperCase()}) analytics would open in a modal here.\n\nFeatures:\n- Historical performance trends\n- Player breakdown\n- League comparisons\n- Predictive insights`);
            }

            showPlayerDetails(player, team, league) {
                alert(`Detailed ${player} analytics would open here.\n\nTeam: ${team} (${league.toUpperCase()})\n\nFeatures:\n- Performance metrics\n- Career statistics\n- Injury history\n- Market value`);
            }

            startGuidedTour() {
                // Implement guided tour logic for LEAGUE-WIDE features
                console.log('Starting LEAGUE-WIDE guided tour...');
            }

            initFilters() {
                document.getElementById('timeFilter').addEventListener('change', () => this.applyFilters());
                document.getElementById('metricFilter').addEventListener('change', () => this.applyFilters());
            }

            applyFilters() {
                // Apply filter logic and refresh LEAGUE-WIDE data
                console.log('Applying LEAGUE-WIDE filters...', {
                    league: this.selectedLeague,
                    division: this.selectedDivision,
                    team: this.selectedTeam
                });

                // Refresh data based on filters
                this.loadLeagueWideData();
            }

            filterTable(searchTerm) {
                const rows = document.querySelectorAll('#dataTableBody tr');
                rows.forEach(row => {
                    const text = row.textContent.toLowerCase();
                    row.style.display = text.includes(searchTerm.toLowerCase()) ? '' : 'none';
                });
            }

            sortTable(column) {
                const direction = this.sortDirection[column] === 'asc' ? 'desc' : 'asc';
                this.sortDirection[column] = direction;

                // Implement sorting logic here
                console.log(`Sorting by ${column} in ${direction} order`);
            }

            exportTableData() {
                // Export table data as CSV
                alert('CSV export functionality would export LEAGUE-WIDE data here.');
            }

            reset3DView() {
                if (this.camera) {
                    this.camera.position.set(10, 10, 10);
                    this.camera.lookAt(0, 0, 0);
                }
            }

            animate3D() {
                if (!this.scene) return;

                // Add animation effects to 3D scene
                console.log('Animating LEAGUE-WIDE 3D visualization...');
            }

            update3DVisualization(data) {
                // Update 3D visualization with new LEAGUE-WIDE data
                console.log('Updating 3D visualization with LEAGUE-WIDE data:', data);
            }

            initDataTable() {
                // Initialize interactive data table features
                console.log('LEAGUE-WIDE data table initialized');
            }
        }

        // Initialize LEAGUE-WIDE dashboard when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            window.analytics = new LeagueWideAnalyticsDashboard();
        });

        // Handle window resize for 3D visualization
        window.addEventListener('resize', () => {
            if (window.analytics && window.analytics.renderer && window.analytics.camera) {
                const container = document.getElementById('analytics3D');
                if (container) {
                    window.analytics.camera.aspect = container.offsetWidth / container.offsetHeight;
                    window.analytics.camera.updateProjectionMatrix();
                    window.analytics.renderer.setSize(container.offsetWidth, container.offsetHeight);
                }
            }
        });
    </script>
</body>
</html>